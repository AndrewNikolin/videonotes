/*
 * popcorn.js version 484e9c9
 * http://popcornjs.org
 *
 * Copyright 2011, Mozilla Foundation
 * Licensed under the MIT license
 */

(function(p,f){function j(a){A.put.call(this,a)}function d(a){this.parent=a;this.byStart=[{start:-1,end:-1}];this.byEnd=[{start:-1,end:-1}];this.animating=[];this.endIndex=this.startIndex=0;this.previousUpdateTime=-1;Object.defineProperty(this,"count",{get:function(){return this.byStart.length}})}function c(a,b){return function(){if(e.plugin.debug)return a.apply(this,arguments);try{return a.apply(this,arguments)}catch(o){e.plugin.errors.push({plugin:b,thrown:o,source:a.toString()});this.emit("pluginerror",
e.plugin.errors)}}}if(f.addEventListener){var g=Array.prototype,h=Object.prototype,i=g.forEach,k=g.slice,q=h.hasOwnProperty,l=h.toString,t=p.Popcorn,n=[],s=false,w={events:{hash:{},apis:{}}},F=function(){return p.requestAnimationFrame||p.webkitRequestAnimationFrame||p.mozRequestAnimationFrame||p.oRequestAnimationFrame||p.msRequestAnimationFrame||function(a){p.setTimeout(a,16)}}(),A={put:function(a){Object.getOwnPropertyNames(a).forEach(function(b){this[b]=a[b]},this)}},e=function(a,b){return new e.p.init(a,
b||null)};e.version="484e9c9";e.isSupported=true;e.instances=[];e.p=e.prototype={init:function(a,b){var o,m=this;if(typeof a==="function")if(f.readyState==="complete")a(f,e);else{n.push(a);if(!s){s=true;var u=function(){f.removeEventListener("DOMContentLoaded",u,false);for(var E=0,z=n.length;E<z;E++)n[E].call(f,e);n=null};f.addEventListener("DOMContentLoaded",u,false)}}else{if(typeof a==="string")try{o=f.querySelector(a)}catch(v){throw Error("Popcorn.js Error: Invalid media element selector: "+a);
}this.media=o||a;this.media.canRatePlayback=true;o=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video";this[o]=this.media;this.options=e.extend({},b)||{};this.id=this.options.id||e.guid(o);if(e.byId(this.id))throw Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")");this.isDestroyed=false;this.data={running:{cue:[]},timeUpdate:e.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:new d(this)};e.instances.push(this);var D=
function(){if(m.media.currentTime<0)m.media.currentTime=0;m.media.removeEventListener("loadedmetadata",D,false);var E,z,C,x,r;E=m.media.duration;E=E!=E?Number.MAX_VALUE:E+1;e.addTrackEvent(m,{start:E,end:E});if(m.options.frameAnimation){m.data.timeUpdate=function(){e.timeUpdate(m,{});e.forEach(e.manifest,function(G,O){if(z=m.data.running[O]){x=z.length;for(var H=0;H<x;H++){C=z[H];(r=C._natives)&&r.frame&&r.frame.call(m,{},C,m.currentTime())}}});m.emit("timeupdate");!m.isDestroyed&&F(m.data.timeUpdate)};
!m.isDestroyed&&F(m.data.timeUpdate)}else{m.data.timeUpdate=function(G){e.timeUpdate(m,G)};m.isDestroyed||m.media.addEventListener("timeupdate",m.data.timeUpdate,false)}};Object.defineProperty(this,"error",{get:function(){return m.media.error}});m.media.readyState>=1?D():m.media.addEventListener("loadedmetadata",D,false);return this}}};e.p.init.prototype=e.p;e.byId=function(a){for(var b=e.instances,o=b.length,m=0;m<o;m++)if(b[m].id===a)return b[m];return null};e.forEach=function(a,b,o){if(!a||!b)return{};
o=o||this;var m,u;if(i&&a.forEach===i)return a.forEach(b,o);if(l.call(a)==="[object NodeList]"){m=0;for(u=a.length;m<u;m++)b.call(o,a[m],m,a);return a}for(m in a)q.call(a,m)&&b.call(o,a[m],m,a);return a};e.extend=function(a){var b=k.call(arguments,1);e.forEach(b,function(o){for(var m in o)a[m]=o[m]});return a};e.extend(e,{noConflict:function(a){if(a)p.Popcorn=t;return e},error:function(a){throw Error(a);},guid:function(a){e.guid.counter++;return(a?a:"")+(+new Date+e.guid.counter)},sizeOf:function(a){var b=
0,o;for(o in a)b++;return b},isArray:Array.isArray||function(a){return l.call(a)==="[object Array]"},nop:function(){},position:function(a){if(!a.parentNode)return null;a=a.getBoundingClientRect();var b={},o=f.documentElement,m=f.body,u,v,D;u=o.clientTop||m.clientTop||0;v=o.clientLeft||m.clientLeft||0;D=p.pageYOffset&&o.scrollTop||m.scrollTop;o=p.pageXOffset&&o.scrollLeft||m.scrollLeft;u=Math.ceil(a.top+D-u);v=Math.ceil(a.left+o-v);for(var E in a)b[E]=Math.round(a[E]);return e.extend({},b,{top:u,left:v})},
disable:function(a,b){if(!a.data.disabled[b]){a.data.disabled[b]=true;if(b in e.registryByName&&a.data.running[b])for(var o=a.data.running[b].length-1,m;o>=0;o--){m=a.data.running[b][o];m._natives.end.call(a,null,m);a.emit("trackend",e.extend({},m,{plugin:m.type,type:"trackend"}))}return a}},enable:function(a,b){if(a.data.disabled[b]){a.data.disabled[b]=false;if(b in e.registryByName&&a.data.running[b])for(var o=a.data.running[b].length-1,m;o>=0;o--){m=a.data.running[b][o];m._natives.start.call(a,
null,m);a.emit("trackstart",e.extend({},m,{plugin:m.type,type:"trackstart",track:m}))}return a}},destroy:function(a){var b=a.data.events,o=a.data.trackEvents,m,u,v,D;for(u in b){m=b[u];for(v in m)delete m[v];b[u]=null}for(D in e.registryByName)e.removePlugin(a,D);o.byStart.length=0;o.byEnd.length=0;if(!a.isDestroyed){a.data.timeUpdate&&a.media.removeEventListener("timeupdate",a.data.timeUpdate,false);a.isDestroyed=true}e.instances.splice(e.instances.indexOf(a),1)}});e.guid.counter=1;e.extend(e.p,
function(){var a={};e.forEach("load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended".split(/\s+/g),function(b){a[b]=function(o){var m;if(typeof this.media[b]==="function"){if(o!=null&&/play|pause/.test(b))this.media.currentTime=e.util.toSeconds(o);this.media[b]();return this}if(o!=null){m=this.media[b];this.media[b]=o;m!==o&&this.emit("attrchange",{attribute:b,previousValue:m,currentValue:o});
return this}return this.media[b]}});return a}());e.forEach("enable disable".split(" "),function(a){e.p[a]=function(b){return e[a](this,b)}});e.extend(e.p,{roundTime:function(){return Math.round(this.media.currentTime)},exec:function(a,b,o){var m=arguments.length,u="trackadded",v,D;try{D=e.util.toSeconds(a)}catch(E){}if(typeof D==="number")a=D;if(typeof a==="number"&&m===2){o=b;b=a;a=e.guid("cue")}else if(m===1)b=-1;else if(v=this.getTrackEvent(a)){this.data.trackEvents.remove(a);j.end(this,v);e.removeTrackEvent.ref(this,
a);u="cuechange";if(typeof a==="string"&&m===2){if(typeof b==="number")o=v._natives.start;if(typeof b==="function"){o=b;b=v.start}}}else if(m>=2){if(typeof b==="string"){try{D=e.util.toSeconds(b)}catch(z){}b=D}if(typeof b==="number")o=o||e.nop();if(typeof b==="function"){o=b;b=-1}}m={id:a,start:b,end:b+1,_running:false,_natives:{start:o||e.nop,end:e.nop,type:"cue"}};if(v)m=e.extend(v,m);if(u==="cuechange"){m._id=m.id||m._id||e.guid(m._natives.type);this.data.trackEvents.add(m);j.start(this,m);this.timeUpdate(this,
null,true);e.addTrackEvent.ref(this,m);this.emit(u,e.extend({},m,{id:a,type:u,previousValue:{time:v.start,fn:v._natives.start},currentValue:{time:b,fn:o||e.nop},track:v}))}else e.addTrackEvent(this,m);return this},mute:function(a){a=a==null||a===true?"muted":"unmuted";if(a==="unmuted"){this.media.muted=false;this.media.volume=this.data.state.volume}if(a==="muted"){this.data.state.volume=this.media.volume;this.media.muted=true}this.emit(a);return this},unmute:function(a){return this.mute(a==null?false:
!a)},position:function(){return e.position(this.media)},toggle:function(a){return e[this.data.disabled[a]?"enable":"disable"](this,a)},defaults:function(a,b){if(e.isArray(a)){e.forEach(a,function(o){for(var m in o)this.defaults(m,o[m])},this);return this}if(!this.options.defaults)this.options.defaults={};this.options.defaults[a]||(this.options.defaults[a]={});e.extend(this.options.defaults[a],b);return this}});e.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",
Events:"unstarted loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"};e.Events.Natives=e.Events.UIEvents+" "+e.Events.MouseEvents+" "+e.Events.Events;w.events.apiTypes=["UIEvents","MouseEvents","Events"];(function(a,b){for(var o=w.events.apiTypes,m=a.Natives.split(/\s+/g),u=0,v=m.length;u<v;u++)b.hash[m[u]]=true;o.forEach(function(D){b.apis[D]={};for(var E=
a[D].split(/\s+/g),z=E.length,C=0;C<z;C++)b.apis[D][E[C]]=true})})(e.Events,w.events);e.events={isNative:function(a){return!!w.events.hash[a]},getInterface:function(a){if(!e.events.isNative(a))return false;var b=w.events,o=b.apiTypes;b=b.apis;for(var m=0,u=o.length,v,D;m<u;m++){D=o[m];if(b[D][a]){v=D;break}}return v},all:e.Events.Natives.split(/\s+/g),fn:{trigger:function(a,b){var o,m=this.data.events[a];if(m){if(o=e.events.getInterface(a)){o=f.createEvent(o);o.initEvent(a,true,true,p,1);this.media.dispatchEvent(o);
return this}for(o=m.slice();o.length;)o.shift().call(this,b)}return this},listen:function(a,b){var o=this,m=true,u=e.events.hooks[a],v,D;if(typeof b!=="function")throw Error("Popcorn.js Error: Listener is not a function");if(!this.data.events[a]){this.data.events[a]=[];m=false}if(u){u.add&&u.add.call(this,{},b);if(u.bind)a=u.bind;if(u.handler){D=b;b=function(E){u.handler.call(o,E,D)}}m=true;if(!this.data.events[a]){this.data.events[a]=[];m=false}}this.data.events[a].push(b);!m&&e.events.all.indexOf(a)>
-1&&this.media.addEventListener(a,function(E){if(o.data.events[a])for(v=o.data.events[a].slice();v.length;)v.shift().call(o,E)},false);return this},unlisten:function(a,b){var o,m=this.data.events[a];if(m){if(typeof b==="string"){for(o=0;o<m.length;o++)m[o].name===b&&m.splice(o--,1);return this}else if(typeof b==="function"){for(;o!==-1;){o=m.indexOf(b);o!==-1&&m.splice(o,1)}return this}this.data.events[a]=null;return this}}},hooks:{canplayall:{bind:"canplaythrough",add:function(a,b){var o=false;if(this.media.readyState){setTimeout(function(){b.call(this,
a)}.bind(this),0);o=true}this.data.hooks.canplayall={fired:o}},handler:function(a,b){if(!this.data.hooks.canplayall.fired){b.call(this,a);this.data.hooks.canplayall.fired=true}}}}};e.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(a){e.p[a[0]]=e.p[a[1]]=e.events.fn[a[0]]});j.start=function(a,b){if(b.end>a.media.currentTime&&b.start<=a.media.currentTime&&!b._running){b._running=true;a.data.running[b._natives.type].push(b);if(!a.data.disabled[b._natives.type]){b._natives.start.call(a,
null,b);a.emit("trackstart",e.extend({},b,{plugin:b._natives.type,type:"trackstart",track:b}))}}};j.end=function(a,b){var o;if((b.end<=a.media.currentTime||b.start>a.media.currentTime)&&b._running){o=a.data.running[b._natives.type];b._running=false;o.splice(o.indexOf(b),1);if(!a.data.disabled[b._natives.type]){b._natives.end.call(a,null,b);a.emit("trackend",e.extend({},b,{plugin:b._natives.type,type:"trackend",track:b}))}}};d.prototype.where=function(a){return(this.parent.getTrackEvents()||[]).filter(function(b){var o,
m;if(!a)return true;for(o in a){m=a[o];if(b[o]&&b[o]===m||b._natives[o]&&b._natives[o]===m)return true}return false})};d.prototype.add=function(a){var b=this.byStart,o=this.byEnd,m;a&&a._id&&this.parent.data.history.push(a._id);a.start=e.util.toSeconds(a.start,this.parent.options.framerate);a.end=e.util.toSeconds(a.end,this.parent.options.framerate);for(m=b.length-1;m>=0;m--)if(a.start>=b[m].start){b.splice(m+1,0,a);break}for(b=o.length-1;b>=0;b--)if(a.end>o[b].end){o.splice(b+1,0,a);break}m<=this.parent.data.trackEvents.startIndex&&
a.start<=this.parent.data.trackEvents.previousUpdateTime&&this.parent.data.trackEvents.startIndex++;b<=this.parent.data.trackEvents.endIndex&&a.end<this.parent.data.trackEvents.previousUpdateTime&&this.parent.data.trackEvents.endIndex++};d.prototype.remove=function(a){if(a instanceof j)a=a.id;if(typeof a==="object"){this.where(a).forEach(function(x){this.removeTrackEvent(x._id)},this.parent);return this}var b,o,m;m=this.byStart.length;for(var u=0,v=0,D=[],E=[],z=[],C=[];--m>-1;){b=this.byStart[u];
o=this.byEnd[u];if(!b._id){D.push(b);E.push(o)}if(b._id){b._id!==a&&D.push(b);o._id!==a&&E.push(o);if(b._id===a)v=u}u++}m=this.animating.length;u=0;if(m)for(;--m>-1;){b=this.animating[u];b._id||z.push(b);b._id&&b._id!==a&&z.push(b);u++}v<=this.startIndex&&this.startIndex--;v<=this.endIndex&&this.endIndex--;this.byStart=D;this.byEnd=E;this.animating=z;m=this.parent.data.history.length;for(u=0;u<m;u++)this.parent.data.history[u]!==a&&C.push(this.parent.data.history[u]);this.parent.data.history=C};e.addTrackEvent=
function(a,b){var o;if(!(b instanceof j)){if((b=new j(b))&&b._natives&&b._natives.type&&a.options.defaults&&a.options.defaults[b._natives.type]){o=e.extend({},b);e.extend(b,a.options.defaults[b._natives.type],o)}if(b._natives){b._id=b.id||b._id||e.guid(b._natives.type);if(b._natives._setup){b._natives._setup.call(a,b);a.emit("tracksetup",e.extend({},b,{plugin:b._natives.type,type:"tracksetup",track:b}))}}a.data.trackEvents.add(b);j.start(a,b);this.timeUpdate(a,null,true);b._id&&e.addTrackEvent.ref(a,
b);a.emit("trackadded",e.extend({},b,b._natives?{plugin:b._natives.type}:{},{type:"trackadded",track:b}))}};e.addTrackEvent.ref=function(a,b){a.data.trackRefs[b._id]=b;return a};e.removeTrackEvent=function(a,b){var o=a.getTrackEvent(b);if(o){o._natives._teardown&&o._natives._teardown.call(a,o);a.data.trackEvents.remove(b);e.removeTrackEvent.ref(a,b);o._natives&&a.emit("trackremoved",e.extend({},o,{plugin:o._natives.type,type:"trackremoved",track:o}))}};e.removeTrackEvent.ref=function(a,b){delete a.data.trackRefs[b];
return a};e.getTrackEvents=function(a){var b=[];a=a.data.trackEvents.byStart;for(var o=a.length,m=0,u;m<o;m++){u=a[m];u._id&&b.push(u)}return b};e.getTrackEvents.ref=function(a){return a.data.trackRefs};e.getTrackEvent=function(a,b){return a.data.trackRefs[b]};e.getTrackEvent.ref=function(a,b){return a.data.trackRefs[b]};e.getLastTrackEventId=function(a){return a.data.history[a.data.history.length-1]};e.timeUpdate=function(a,b){var o=a.media.currentTime,m=a.data.trackEvents.previousUpdateTime,u=a.data.trackEvents,
v=u.endIndex,D=u.startIndex,E=u.byStart.length,z=u.byEnd.length,C=e.registryByName,x,r,G;if(m<=o){for(;u.byEnd[v]&&u.byEnd[v].end<=o;){x=u.byEnd[v];r=(m=x._natives)&&m.type;if(!m||C[r]||a[r]){if(x._running===true){x._running=false;G=a.data.running[r];G.splice(G.indexOf(x),1);if(!a.data.disabled[r]){m.end.call(a,b,x);a.emit("trackend",e.extend({},x,{plugin:r,type:"trackend",track:x}))}}v++}else{e.removeTrackEvent(a,x._id);return}}for(;u.byStart[D]&&u.byStart[D].start<=o;){x=u.byStart[D];r=(m=x._natives)&&
m.type;if(!m||C[r]||a[r]){if(x.end>o&&x._running===false){x._running=true;a.data.running[r].push(x);if(!a.data.disabled[r]){m.start.call(a,b,x);a.emit("trackstart",e.extend({},x,{plugin:r,type:"trackstart",track:x}))}}D++}else{e.removeTrackEvent(a,x._id);return}}}else if(m>o){for(;u.byStart[D]&&u.byStart[D].start>o;){x=u.byStart[D];r=(m=x._natives)&&m.type;if(!m||C[r]||a[r]){if(x._running===true){x._running=false;G=a.data.running[r];G.splice(G.indexOf(x),1);if(!a.data.disabled[r]){m.end.call(a,b,
x);a.emit("trackend",e.extend({},x,{plugin:r,type:"trackend",track:x}))}}D--}else{e.removeTrackEvent(a,x._id);return}}for(;u.byEnd[v]&&u.byEnd[v].end>o;){x=u.byEnd[v];r=(m=x._natives)&&m.type;if(!m||C[r]||a[r]){if(x.start<=o&&x._running===false){x._running=true;a.data.running[r].push(x);if(!a.data.disabled[r]){m.start.call(a,b,x);a.emit("trackstart",e.extend({},x,{plugin:r,type:"trackstart",track:x}))}}v--}else{e.removeTrackEvent(a,x._id);return}}}u.endIndex=v;u.startIndex=D;u.previousUpdateTime=
o;u.byStart.length<E&&u.startIndex--;u.byEnd.length<z&&u.endIndex--};e.extend(e.p,{getTrackEvents:function(){return e.getTrackEvents.call(null,this)},getTrackEvent:function(a){return e.getTrackEvent.call(null,this,a)},getLastTrackEventId:function(){return e.getLastTrackEventId.call(null,this)},removeTrackEvent:function(a){e.removeTrackEvent.call(null,this,a);return this},removePlugin:function(a){e.removePlugin.call(null,this,a);return this},timeUpdate:function(a){e.timeUpdate.call(null,this,a);return this},
destroy:function(){e.destroy.call(null,this);return this}});e.manifest={};e.registry=[];e.registryByName={};e.plugin=function(a,b,o){if(e.protect.natives.indexOf(a.toLowerCase())>=0)e.error("'"+a+"' is a protected function name");else{var m=typeof b==="function",u=["start","end","type","manifest"],v=["_setup","_teardown","start","end","frame"],D={},E=function(x,r){x=x||e.nop;r=r||e.nop;return function(){x.apply(this,arguments);r.apply(this,arguments)}};e.manifest[a]=o=o||b.manifest||{};v.forEach(function(x){b[x]=
c(b[x]||e.nop,a)});var z=function(x,r){if(!r)return this;if(r.ranges&&e.isArray(r.ranges)){e.forEach(r.ranges,function(B){B=e.extend({},r,B);delete B.ranges;this[a](B)},this);return this}var G=r._natives={},O="",H;e.extend(G,x);r._natives.type=r._natives.plugin=a;r._running=false;G.start=G.start||G["in"];G.end=G.end||G.out;if(r.once)G.end=E(G.end,function(){this.removeTrackEvent(r._id)});G._teardown=E(function(){var B=k.call(arguments),N=this.data.running[G.type];B.unshift(null);B[1]._running&&N.splice(N.indexOf(r),
1)&&G.end.apply(this,B);B[1]._running=false;this.emit("trackend",e.extend({},r,{plugin:G.type,type:"trackend",track:e.getTrackEvent(this,r.id||r._id)}))},G._teardown);G._teardown=E(G._teardown,function(){this.emit("trackteardown",e.extend({},r,{plugin:a,type:"trackteardown",track:e.getTrackEvent(this,r.id||r._id)}))});r.compose=r.compose||[];if(typeof r.compose==="string")r.compose=r.compose.split(" ");r.effect=r.effect||[];if(typeof r.effect==="string")r.effect=r.effect.split(" ");r.compose=r.compose.concat(r.effect);
r.compose.forEach(function(B){O=e.compositions[B]||{};v.forEach(function(N){G[N]=E(G[N],O[N])})});r._natives.manifest=o;if(!("start"in r))r.start=r["in"]||0;if(!r.end&&r.end!==0)r.end=r.out||Number.MAX_VALUE;if(!q.call(r,"toString"))r.toString=function(){var B=["start: "+r.start,"end: "+r.end,"id: "+(r.id||r._id)];r.target!=null&&B.push("target: "+r.target);return a+" ( "+B.join(", ")+" )"};if(!r.target){H="options"in o&&o.options;r.target=H&&"target"in H&&H.target}if(!r._id&&r._natives)r._id=e.guid(r._natives.type);
if(r instanceof j){if(r._natives){r._id=r.id||r._id||e.guid(r._natives.type);if(r._natives._setup){r._natives._setup.call(this,r);this.emit("tracksetup",e.extend({},r,{plugin:r._natives.type,type:"tracksetup",track:r}))}}this.data.trackEvents.add(r);j.start(this,r);this.timeUpdate(this,null,true);r._id&&e.addTrackEvent.ref(this,r)}else e.addTrackEvent(this,r);e.forEach(x,function(B,N){u.indexOf(N)===-1&&this.on(N,B)},this);return this};e.p[a]=D[a]=function(x,r){var G,O;if(x&&!r)r=x;else if(G=this.getTrackEvent(x)){O=
r;var H={},B;for(B in G)if(q.call(O,B)&&q.call(G,B))H[B]=G[B];if(G._natives._update){this.data.trackEvents.remove(G);if(q.call(r,"start"))G.start=r.start;if(q.call(r,"end"))G.end=r.end;j.end(this,G);m&&b.call(this,G);G._natives._update.call(this,G,r);this.data.trackEvents.add(G);j.start(this,G)}else{e.extend(G,r);this.data.trackEvents.remove(x);G._natives._teardown&&G._natives._teardown.call(this,G);e.removeTrackEvent.ref(this,x);if(m)z.call(this,b.call(this,G),G);else{G._id=G.id||G._id||e.guid(G._natives.type);
if(G._natives&&G._natives._setup){G._natives._setup.call(this,G);this.emit("tracksetup",e.extend({},G,{plugin:G._natives.type,type:"tracksetup",track:G}))}this.data.trackEvents.add(G);j.start(this,G);this.timeUpdate(this,null,true);e.addTrackEvent.ref(this,G)}this.emit("trackchange",{id:G.id,type:"trackchange",previousValue:H,currentValue:G,track:G});return this}G._natives.type!=="cue"&&this.emit("trackchange",{id:G.id,type:"trackchange",previousValue:H,currentValue:O,track:G});return this}else r.id=
x;this.data.running[a]=this.data.running[a]||[];G=e.extend({},this.options.defaults&&this.options.defaults[a]||{},r);z.call(this,m?b.call(this,G):b,G);return this};o&&e.extend(b,{manifest:o});var C={fn:D[a],definition:b,base:b,parents:[],name:a};e.registry.push(e.extend(D,C,{type:a}));e.registryByName[a]=C;return D}};e.plugin.errors=[];e.plugin.debug=e.version==="484e9c9";e.removePlugin=function(a,b){if(!b){b=a;a=e.p;if(e.protect.natives.indexOf(b.toLowerCase())>=0){e.error("'"+b+"' is a protected function name");
return}var o=e.registry.length,m;for(m=0;m<o;m++)if(e.registry[m].name===b){e.registry.splice(m,1);delete e.registryByName[b];delete e.manifest[b];delete a[b];return}}o=a.data.trackEvents.byStart;m=a.data.trackEvents.byEnd;var u=a.data.trackEvents.animating,v,D;v=0;for(D=o.length;v<D;v++){if(o[v]&&o[v]._natives&&o[v]._natives.type===b){o[v]._natives._teardown&&o[v]._natives._teardown.call(a,o[v]);o.splice(v,1);v--;D--;if(a.data.trackEvents.startIndex<=v){a.data.trackEvents.startIndex--;a.data.trackEvents.endIndex--}}m[v]&&
m[v]._natives&&m[v]._natives.type===b&&m.splice(v,1)}v=0;for(D=u.length;v<D;v++)if(u[v]&&u[v]._natives&&u[v]._natives.type===b){u.splice(v,1);v--;D--}};e.compositions={};e.compose=function(a,b,o){e.manifest[a]=o||b.manifest||{};e.compositions[a]=b};e.plugin.effect=e.effect=e.compose;var L=/^(?:\.|#|\[)/;e.dom={debug:false,find:function(a,b){var o=null;b=b||f;if(a){if(!L.test(a)){o=f.getElementById(a);if(o!==null)return o}try{o=b.querySelector(a)}catch(m){if(e.dom.debug)throw Error(m);}}return o}};
var y=/\?/,I={ajax:null,url:"",data:"",dataType:"",success:e.nop,type:"GET",async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8"};e.xhr=function(a){a.dataType=a.dataType&&a.dataType.toLowerCase()||null;if(a.dataType&&(a.dataType==="jsonp"||a.dataType==="script"))e.xhr.getJSONP(a.url,a.success,a.dataType==="script");else{a=e.extend({},I,a);a.ajax=new XMLHttpRequest;if(a.ajax){if(a.type==="GET"&&a.data){a.url+=(y.test(a.url)?"&":"?")+a.data;a.data=null}a.ajax.open(a.type,a.url,
a.async);a.type==="POST"&&a.ajax.setRequestHeader("Content-Type",a.contentType);a.ajax.send(a.data||null);return e.xhr.httpData(a)}}};e.xhr.httpData=function(a){var b,o=null,m,u=null;a.ajax.onreadystatechange=function(){if(a.ajax.readyState===4){try{o=JSON.parse(a.ajax.responseText)}catch(v){}b={xml:a.ajax.responseXML,text:a.ajax.responseText,json:o};if(!b.xml||!b.xml.documentElement){b.xml=null;try{m=new DOMParser;u=m.parseFromString(a.ajax.responseText,"text/xml");if(!u.getElementsByTagName("parsererror").length)b.xml=
u}catch(D){}}if(a.dataType)b=b[a.dataType];a.success.call(a.ajax,b)}};return b};e.xhr.getJSONP=function(a,b,o){var m=f.head||f.getElementsByTagName("head")[0]||f.documentElement,u=f.createElement("script"),v=false,D=[];D=/(=)\?(?=&|$)|\?\?/;var E,z;if(!o){z=a.match(/(callback=[^&]*)/);if(z!==null&&z.length){D=z[1].split("=")[1];if(D==="?")D="jsonp";E=e.guid(D);a=a.replace(/(callback=[^&]*)/,"callback="+E)}else{E=e.guid("jsonp");if(D.test(a))a=a.replace(D,"$1"+E);D=a.split(/\?(.+)?/);a=D[0]+"?";if(D[1])a+=
D[1]+"&";a+="callback="+E}window[E]=function(C){b&&b(C);v=true}}u.addEventListener("load",function(){o&&b&&b();v&&delete window[E];m.removeChild(u)},false);u.src=a;m.insertBefore(u,m.firstChild)};e.getJSONP=e.xhr.getJSONP;e.getScript=e.xhr.getScript=function(a,b){return e.xhr.getJSONP(a,b,true)};e.util={toSeconds:function(a,b){var o=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,m,u,v;if(typeof a==="number")return a;typeof a==="string"&&!o.test(a)&&e.error("Invalid time format");o=a.split(":");m=o.length-
1;u=o[m];if(u.indexOf(";")>-1){u=u.split(";");v=0;if(b&&typeof b==="number")v=parseFloat(u[1],10)/b;o[m]=parseInt(u[0],10)+v}m=o[0];return{1:parseFloat(m,10),2:parseInt(m,10)*60+parseFloat(o[1],10),3:parseInt(m,10)*3600+parseInt(o[1],10)*60+parseFloat(o[2],10)}[o.length||1]}};e.p.cue=e.p.exec;e.protect={natives:function(a){return Object.keys?Object.keys(a):function(b){var o,m=[];for(o in b)q.call(b,o)&&m.push(o);return m}(a)}(e.p).map(function(a){return a.toLowerCase()})};e.forEach({listen:"on",unlisten:"off",
trigger:"emit",exec:"cue"},function(a,b){var o=e.p[b];e.p[b]=function(){if(typeof console!=="undefined"&&console.warn){console.warn("Deprecated method '"+b+"', "+(a==null?"do not use.":"use '"+a+"' instead."));e.p[b]=o}return e.p[a].apply(this,[].slice.call(arguments))}});p.Popcorn=e}else{p.Popcorn={isSupported:false};for(g="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript".split(/\s+/);g.length;)p.Popcorn[g.shift()]=
function(){}}})(window,window.document);(function(p,f){function j(g){g=typeof g==="string"?g:[g.language,g.region].join("-");var h=g.split("-");return{iso6391:g,language:h[0]||"",region:h[1]||""}}var d=p.navigator,c=j(d.userLanguage||d.language);f.locale={get:function(){return c},set:function(g){c=j(g);f.locale.broadcast();return c},broadcast:function(g){var h=f.instances,i=h.length,k=0,q;for(g=g||"locale:changed";k<i;k++){q=h[k];g in q.data.events&&q.trigger(g)}}}})(this,this.Popcorn);(function(p){var f=Object.prototype.hasOwnProperty;p.parsers={};p.parser=function(j,d,c){if(p.protect.natives.indexOf(j.toLowerCase())>=0)p.error("'"+j+"' is a protected function name");else{if(typeof d==="function"&&!c){c=d;d=""}if(!(typeof c!=="function"||typeof d!=="string")){var g={};g[j]=function(h,i){if(!h)return this;var k=this;p.xhr({url:h,dataType:d,success:function(q){var l,t,n=0;q=c(q).data||[];if(l=q.length){for(;n<l;n++){t=q[n];for(var s in t)f.call(t,s)&&k[s]&&k[s](t[s])}i&&i()}}});
return this};p.extend(p.p,g);return g}}}})(Popcorn);(function(p){var f=function(j,d){j=j||p.nop;d=d||p.nop;return function(){j.apply(this,arguments);d.apply(this,arguments)}};p.player=function(j,d){if(!p[j]){d=d||{};var c=function(g,h,i){i=i||{};var k=new Date/1E3,q=k,l=0,t=0,n=1,s=false,w={},F=typeof g==="string"?p.dom.find(g):g,A={};Object.prototype.__defineGetter__||(A=F||document.createElement("div"));for(var e in F)if(!(e in A))if(typeof F[e]==="object")A[e]=F[e];else if(typeof F[e]==="function")A[e]=function(y){return"length"in F[y]&&!F[y].call?
F[y]:function(){return F[y].apply(F,arguments)}}(e);else p.player.defineProperty(A,e,{get:function(y){return function(){return F[y]}}(e),set:p.nop,configurable:true});var L=function(){k=new Date/1E3;if(!A.paused){A.currentTime+=k-q;A.dispatchEvent("timeupdate");setTimeout(L,10)}q=k};A.play=function(){this.paused=false;if(A.readyState>=4){q=new Date/1E3;A.dispatchEvent("play");L()}};A.pause=function(){this.paused=true;A.dispatchEvent("pause")};p.player.defineProperty(A,"currentTime",{get:function(){return l},
set:function(y){l=+y;A.dispatchEvent("timeupdate");return l},configurable:true});p.player.defineProperty(A,"volume",{get:function(){return n},set:function(y){n=+y;A.dispatchEvent("volumechange");return n},configurable:true});p.player.defineProperty(A,"muted",{get:function(){return s},set:function(y){s=+y;A.dispatchEvent("volumechange");return s},configurable:true});p.player.defineProperty(A,"readyState",{get:function(){return t},set:function(y){return t=y},configurable:true});A.addEventListener=function(y,
I){w[y]||(w[y]=[]);w[y].push(I);return I};A.removeEventListener=function(y,I){var a,b=w[y];if(b){for(a=w[y].length-1;a>=0;a--)I===b[a]&&b.splice(a,1);return I}};A.dispatchEvent=function(y){var I,a=y.type;if(!a){a=y;if(y=p.events.getInterface(a)){I=document.createEvent(y);I.initEvent(a,true,true,window,1)}}if(w[a])for(y=w[a].length-1;y>=0;y--)w[a][y].call(this,I,this)};A.src=h||"";A.duration=0;A.paused=true;A.ended=0;i&&i.events&&p.forEach(i.events,function(y,I){A.addEventListener(I,y,false)});if(d._canPlayType(F.nodeName,
h)!==false)if(d._setup)d._setup.call(A,i);else{A.readyState=4;A.dispatchEvent("loadedmetadata");A.dispatchEvent("loadeddata");A.dispatchEvent("canplaythrough")}else setTimeout(function(){A.dispatchEvent("error")},0);g=new p.p.init(A,i);if(d._teardown)g.destroy=f(g.destroy,function(){d._teardown.call(A,i)});return g};c.canPlayType=d._canPlayType=d._canPlayType||p.nop;p[j]=p.player.registry[j]=c}};p.player.registry={};p.player.defineProperty=Object.defineProperty||function(j,d,c){j.__defineGetter__(d,
c.get||p.nop);j.__defineSetter__(d,c.set||p.nop)};p.player.playerQueue=function(){var j=[],d=false;return{next:function(){d=false;j.shift();j[0]&&j[0]()},add:function(c){j.push(function(){d=true;c&&c()});!d&&j[0]()}}};p.smart=function(j,d,c){var g=typeof j==="string"?p.dom.find(j):j,h,i,k,q,l,t="HTMLVimeoVideoElement HTMLSoundCloudAudioElement HTMLNullVideoElement".split(" ");if(g){d=typeof d==="string"?[d]:d;j=0;for(l=d.length;j<l;j++){h=d[j];for(i=0;i<t.length;i++)if((q=p[t[i]])&&q._canPlaySrc(h)===
"probably"){k=q(g);d=p(k,c);setTimeout(function(){k.src=h},0);return d}for(var n in p.player.registry)if(p.player.registry.hasOwnProperty(n))if(p.player.registry[n].canPlayType(g.nodeName,h))return p[n](g,h,c)}n=p.guid("popcorn-video-");t='<video id="'+n+'" preload=auto autobuffer>';j=0;for(l=d.length;j<l;j++)t+='<source src="'+d[j]+'">';t+="</video>";g.innerHTML=t;c&&c.events&&c.events.error&&g.addEventListener("error",c.events.error,false);return p("#"+n,c)}else p.error("Specified target `"+j+"` was not found.")}})(Popcorn);(function(p,f){var j=p.document,d=p.location,c=/:\/\//,g=d.href.replace(d.href.split("/").slice(-1)[0],""),h=function(k,q,l){k=k||0;q=(q||k||0)+1;l=l||1;q=Math.ceil((q-k)/l)||0;var t=0,n=[];for(n.length=q;t<q;){n[t++]=k;k+=l}return n};f.sequence=function(k,q){return new f.sequence.init(k,q)};f.sequence.init=function(k,q){this.parent=j.getElementById(k);this.seqId=f.guid("__sequenced");this.queue=[];this.playlist=[];this.inOuts={ofVideos:[],ofClips:[]};this.dims={width:0,height:0};this.active=0;this.playing=
this.cycling=false;this.times={last:0};this.events={};var l=this,t=0;f.forEach(q,function(n,s){var w=j.createElement("video");w.preload="auto";w.controls=true;w.style.display=s&&"none"||"";w.id=l.seqId+"-"+s;l.queue.push(w);var F=n["in"],A=n.out;l.inOuts.ofVideos.push({"in":F!==undefined&&F||1,out:A!==undefined&&A||0});l.inOuts.ofVideos[s].out=l.inOuts.ofVideos[s].out||l.inOuts.ofVideos[s]["in"]+2;w.src=!c.test(n.src)?g+n.src:n.src;w.setAttribute("data-sequence-owner",k);w.setAttribute("data-sequence-guid",
l.seqId);w.setAttribute("data-sequence-id",s);w.setAttribute("data-sequence-clip",[l.inOuts.ofVideos[s]["in"],l.inOuts.ofVideos[s].out].join(":"));l.parent.appendChild(w);l.playlist.push(f("#"+w.id))});l.inOuts.ofVideos.forEach(function(n){n={"in":t,out:t+(n.out-n["in"])};l.inOuts.ofClips.push(n);t=n.out+1});f.forEach(this.queue,function(n,s){function w(){if(!s){l.dims.width=n.videoWidth;l.dims.height=n.videoHeight}n.currentTime=l.inOuts.ofVideos[s]["in"]-0.5;n.removeEventListener("canplaythrough",
w,false);return true}n.addEventListener("canplaythrough",w,false);n.addEventListener("play",function(){l.playing=true},false);n.addEventListener("pause",function(){l.playing=false},false);n.addEventListener("timeupdate",function(F){F=F.srcElement||F.target;F=+(F.dataset&&F.dataset.sequenceId||F.getAttribute("data-sequence-id"));var A=Math.floor(n.currentTime);if(l.times.last!==A&&F===l.active){l.times.last=A;A===l.inOuts.ofVideos[F].out&&f.sequence.cycle.call(l,F)}},false)});return this};f.sequence.init.prototype=
f.sequence.prototype;f.sequence.cycle=function(k){this.queue||f.error("Popcorn.sequence.cycle is not a public method");var q=this.queue,l=this.inOuts.ofVideos,t=q[k],n=0,s;if(q[k+1])n=k+1;if(q[k+1]){q=q[n];l=l[n];f.extend(q,{width:this.dims.width,height:this.dims.height});s=this.playlist[n];t.pause();this.active=n;this.times.last=l["in"]-1;s.currentTime(l["in"]);s[n?"play":"pause"]();this.trigger("cycle",{position:{previous:k,current:n}});if(n){t.style.display="none";q.style.display=""}this.cycling=
false}else this.playlist[k].pause();return this};var i=["timeupdate","play","pause"];f.extend(f.sequence.prototype,{eq:function(k){return this.playlist[k]},remove:function(){this.parent.innerHTML=null},clip:function(k){return this.inOuts.ofVideos[k]},duration:function(){for(var k=0,q=this.inOuts.ofClips,l=0;l<q.length;l++)k+=q[l].out-q[l]["in"]+1;return k-1},play:function(){this.playlist[this.active].play();return this},exec:function(k,q){var l=this.active;this.inOuts.ofClips.forEach(function(t,n){if(k>=
t["in"]&&k<=t.out)l=n});k+=this.inOuts.ofVideos[l]["in"]-this.inOuts.ofClips[l]["in"];f.addTrackEvent(this.playlist[l],{start:k-1,end:k,_running:false,_natives:{start:q||f.nop,end:f.nop,type:"exec"}});return this},listen:function(k,q){var l=this,t=this.playlist,n=t.length,s=0;if(!q)q=f.nop;if(f.Events.Natives.indexOf(k)>-1)f.forEach(t,function(w){w.listen(k,function(F){F.active=l;if(i.indexOf(k)>-1)q.call(w,F);else++s===n&&q.call(w,F)})});else{this.events[k]||(this.events[k]={});t=q.name||f.guid("__"+
k);this.events[k][t]=q}return this},unlisten:function(){},trigger:function(k,q){var l=this;if(!(f.Events.Natives.indexOf(k)>-1)){this.events[k]&&f.forEach(this.events[k],function(t){t.call(l,{type:k},q)});return this}}});f.forEach(f.manifest,function(k,q){f.sequence.prototype[q]=function(l){var t={},n=[],s,w,F,A,e;for(s=0;s<this.inOuts.ofClips.length;s++){n=this.inOuts.ofClips[s];w=h(n["in"],n.out);F=w.indexOf(l.start);A=w.indexOf(l.end);if(F>-1)t[s]=f.extend({},n,{start:w[F],clipIdx:F});if(A>-1)t[s]=
f.extend({},n,{end:w[A],clipIdx:A})}s=Object.keys(t).map(function(y){return+y});n=h(s[0],s[1]);for(s=0;s<n.length;s++){F={};A=n[s];var L=t[A];if(L){e=this.inOuts.ofVideos[A];w=L.clipIdx;e=h(e["in"],e.out);if(L.start){F.start=e[w];F.end=e[e.length-1]}if(L.end){F.start=e[0];F.end=e[w]}}else{F.start=this.inOuts.ofVideos[A]["in"];F.end=this.inOuts.ofVideos[A].out}this.playlist[A][q](f.extend({},l,F))}return this}})})(this,Popcorn);(function(p){document.addEventListener("DOMContentLoaded",function(){var f=document.querySelectorAll("[data-timeline-sources]");p.forEach(f,function(j,d){var c=f[d],g,h,i;if(!c.id)c.id=p.guid("__popcorn");if(c.nodeType&&c.nodeType===1){i=p("#"+c.id);g=(c.getAttribute("data-timeline-sources")||"").split(",");g[0]&&p.forEach(g,function(k){h=k.split("!");if(h.length===1){h=k.match(/(.*)[\/\\]([^\/\\]+\.\w+)$/)[2].split(".");h[0]="parse"+h[1].toUpperCase();h[1]=k}g[0]&&i[h[0]]&&i[h[0]](h[1])});i.autoplay()&&
i.play()}})},false)})(Popcorn);(function(p,f){function j(g){var h=j.options;g=h.parser[h.strictMode?"strict":"loose"].exec(g);for(var i={},k=14;k--;)i[h.key[k]]=g[k]||"";i[h.q.name]={};i[h.key[12]].replace(h.q.parser,function(q,l,t){if(l)i[h.q.name][l]=t});return i}function d(){}j.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var c={length:0,start:p.nop,end:p.nop};MediaError=MediaError||function(){function g(h,i){this.code=h||null;this.message=i||""}g.MEDIA_ERR_NONE_ACTIVE=0;g.MEDIA_ERR_ABORTED=1;g.MEDIA_ERR_NETWORK=2;g.MEDIA_ERR_DECODE=3;g.MEDIA_ERR_NONE_SUPPORTED=4;return g}();d.prototype={_util:{type:"HTML5",TIMEUPDATE_MS:250,
MIN_WIDTH:300,MIN_HEIGHT:150,isAttributeSet:function(g){return typeof g==="string"||g===true},parseUri:j},addEventListener:function(g,h,i){f.addEventListener(this._eventNamespace+g,h,i)},removeEventListener:function(g,h,i){f.removeEventListener(this._eventNamespace+g,h,i)},dispatchEvent:function(g){var h=f.createEvent("CustomEvent");h.initCustomEvent(this._eventNamespace+g,false,false,{type:g,target:this.parentNode,data:null});f.dispatchEvent(h)},load:p.nop,canPlayType:function(){return""},getBoundingClientRect:function(){return this.parentNode.getBoundingClientRect()},
NETWORK_EMPTY:0,NETWORK_IDLE:1,NETWORK_LOADING:2,NETWORK_NO_SOURCE:3,HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4};d.prototype.constructor=d;Object.defineProperties(d.prototype,{currentSrc:{get:function(){return this.src!==undefined?this.src:""}},preload:{get:function(){return"auto"},set:p.nop},controls:{get:function(){return true},set:p.nop},poster:{get:function(){return""},set:p.nop},crossorigin:{get:function(){return""}},played:{get:function(){return c}},
seekable:{get:function(){return c}},buffered:{get:function(){return c}},defaultMuted:{get:function(){return false}},defaultPlaybackRate:{get:function(){return 1}},style:{get:function(){return this.parentNode.style}},id:{get:function(){return this.parentNode.id}},canRatePlayback:{get:function(){return false}}});p._MediaElementProto=d})(Popcorn,window.document);(function(p,f){function j(){return"maybe"}function d(c,g){var h=typeof c==="string"?f.querySelector(c):c,i=f.createElement(g);h.appendChild(i);i._canPlaySrc=j;i.canRatePlayback=true;return i}p.HTMLVideoElement=function(c){return d(c,"video")};p.HTMLVideoElement._canPlaySrc=j;p.HTMLAudioElement=function(c){return d(c,"audio")};p.HTMLAudioElement._canPlaySrc=j})(Popcorn,window.document);(function(p,f){function j(h){this.startTime=0;this.currentTime=h.currentTime||0;this.duration=h.duration||NaN;this.playInterval=null;this.paused=true;this.ended=h.endedCallback||p.nop}function d(h){function i(I){L.unshift(I)}function k(I){if(F){e.seeking=true;n.dispatchEvent("seeking");A.seekTo(I);e.ended=false;e.seeking=false;n.dispatchEvent("timeupdate");n.dispatchEvent("seeked");n.dispatchEvent("canplay");n.dispatchEvent("canplaythrough")}else i(function(){k(I)})}function q(){n.dispatchEvent("timeupdate")}
function l(){e.paused=true;clearInterval(y);n.dispatchEvent("pause")}function t(){if(e.loop){k(0);n.play()}else{e.ended=true;l();n.dispatchEvent("timeupdate");n.dispatchEvent("ended")}}var n=this,s=typeof h==="string"?f.querySelector(h):h,w=f.createElement("div"),F=false,A,e={src:c,networkState:n.NETWORK_EMPTY,readyState:n.HAVE_NOTHING,autoplay:c,preload:c,controls:c,loop:false,poster:c,volume:1,muted:false,width:s.width|0?s.width:n._util.MIN_WIDTH,height:s.height|0?s.height:n._util.MIN_HEIGHT,seeking:false,
ended:false,paused:1,error:null},L=[],y;n._eventNamespace=p.guid("HTMLNullVideoElement::");n.parentNode=s;n._util.type="NullVideo";n.play=function(){if(F){A.play();if(e.paused){if(e.paused===1){e.paused=false;n.dispatchEvent("play");n.dispatchEvent("playing")}else{if(e.ended){k(0);e.ended=false}if(e.paused){e.paused=false;e.loop||n.dispatchEvent("play");n.dispatchEvent("playing")}}y=setInterval(q,n._util.TIMEUPDATE_MS)}}else i(function(){n.play()})};n.pause=function(){if(F){A.pause();e.paused||l()}else i(function(){n.pause()})};
Object.defineProperties(n,{src:{get:function(){return e.src},set:function(I){if(I&&I!==e.src)if(n._canPlaySrc(I)){e.src=I;if(F)if(F&&A){A.pause();A=null;s.removeChild(w);w=f.createElement("div")}w.width=e.width;w.height=e.height;s.appendChild(w);I=g.exec(I);A=new j({currentTime:+I[1],duration:+I[2],endedCallback:t});n.dispatchEvent("loadstart");n.dispatchEvent("progress");n.dispatchEvent("durationchange");F=true;e.networkState=n.NETWORK_IDLE;e.readyState=n.HAVE_METADATA;n.dispatchEvent("loadedmetadata");
n.dispatchEvent("loadeddata");e.readyState=n.HAVE_FUTURE_DATA;n.dispatchEvent("canplay");e.readyState=n.HAVE_ENOUGH_DATA;n.dispatchEvent("canplaythrough");for(I=L.length;I--;){L[I]();delete L[I]}e.autoplay&&n.play()}else{e.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};n.dispatchEvent("error")}}},autoplay:{get:function(){return e.autoplay},set:function(I){e.autoplay=n._util.isAttributeSet(I)}},loop:{get:function(){return e.loop},set:function(I){e.loop=
n._util.isAttributeSet(I)}},width:{get:function(){return w.width},set:function(I){w.width=I;e.width=w.width}},height:{get:function(){return w.height},set:function(I){w.height=I;e.height=w.height}},currentTime:{get:function(){var I;I=F?A.currentTime:0;return I},set:function(I){k(I)}},canRatePlayback:{get:function(){return false}},duration:{get:function(){return A?A.duration:NaN}},ended:{get:function(){return e.ended}},paused:{get:function(){return e.paused}},seeking:{get:function(){return e.seeking}},
readyState:{get:function(){return e.readyState}},networkState:{get:function(){return e.networkState}},volume:{get:function(){return e.volume},set:function(I){if(I<0||I>1)throw"Volume value must be between 0.0 and 1.0";e.volume=I;n.dispatchEvent("volumechange")}},muted:{get:function(){return e.muted},set:function(I){I=n._util.isAttributeSet(I);e.muted=I;n.dispatchEvent("volumechange")}},error:{get:function(){return e.error}}})}var c="",g=/#t=(\d+\.?\d*)?,?(\d+\.?\d*)/;j.prototype={play:function(){var h=
this;if(this.paused){this.paused=false;this.startTime=Date.now();this.playInterval=setInterval(function(){h.currentTime+=(Date.now()-h.startTime)/1E3;h.startTime=Date.now();if(h.currentTime>=h.duration){h.currentTime=h.duration;h.pause();h.ended()}},16)}},pause:function(){if(!this.paused){this.paused=true;clearInterval(this.playInterval)}},seekTo:function(h){h=h<0?0:h;this.currentTime=h=h>this.duration?this.duration:h}};d.prototype=new p._MediaElementProto;d.prototype.constructor=d;d.prototype._canPlaySrc=
function(h){return g.test(h)?"probably":c};d.prototype.canPlayType=function(h){return h==="video/x-nullvideo"?"probably":c};p.HTMLNullVideoElement=function(h){return new d(h)};p.HTMLNullVideoElement._canPlaySrc=d.prototype._canPlaySrc})(Popcorn,document);(function(p,f,j){function d(){if(!q){p.getScript("//w.soundcloud.com/player/api.js",function(){p.getScript("//connect.soundcloud.com/sdk.js",function(){k=true;SC.initialize({client_id:"PRaNFlda6Bhf5utPjUsptg"});for(var t=l.length;t--;){l[t]();delete l[t]}})});q=true}return k}function c(t){l.unshift(t)}function g(t){function n(B){r.unshift(B)}function s(){x.bind(SC.Widget.Events.LOAD_PROGRESS,function(B){I({type:"loadProgress",data:B.currentPosition/1E3})});x.bind(SC.Widget.Events.PLAY_PROGRESS,function(B){I({type:"playProgress",
data:B.currentPosition/1E3})});x.bind(SC.Widget.Events.PLAY,function(){I({type:"play"})});x.bind(SC.Widget.Events.PAUSE,function(){I({type:"pause"})});x.bind(SC.Widget.Events.SEEK,function(B){I({type:"seek",data:B.currentPosition/1E3})});x.bind(SC.Widget.Events.FINISH,function(){I({type:"finish"})});C=true;x.getDuration(F)}function w(){x.bind(SC.Widget.Events.LOAD_PROGRESS,function(B){if(B.loadedProgress>0){x.unbind(SC.Widget.Events.LOAD_PROGRESS);x.pause()}});x.bind(SC.Widget.Events.PLAY,function(){x.unbind(SC.Widget.Events.PLAY);
x.bind(SC.Widget.Events.PAUSE,function(){x.unbind(SC.Widget.Events.PAUSE);x.setVolume(100);s()})});x.setVolume(0);x.play()}function F(B){B/=1E3;var N=z.duration;if(N!==B){z.duration=B;v.dispatchEvent("durationchange");if(isNaN(N)){z.networkState=v.NETWORK_IDLE;z.readyState=v.HAVE_METADATA;v.dispatchEvent("loadedmetadata");v.dispatchEvent("loadeddata");z.readyState=v.HAVE_FUTURE_DATA;v.dispatchEvent("canplay");z.readyState=v.HAVE_ENOUGH_DATA;v.dispatchEvent("canplaythrough");for(B=r.length;B--;){r[B]();
delete r[B]}z.paused&&z.autoplay&&v.play()}}}function A(B){function N(){z.seeking=true;v.dispatchEvent("seeking");x.seekTo(B);z.ended=false;z.seeking=false;v.dispatchEvent("timeupdate");v.dispatchEvent("seeked");v.dispatchEvent("canplay");v.dispatchEvent("canplaythrough")}z.currentTime=B;B*=1E3;C?N():addMediaReadyCallback(N)}function e(){z.paused=true;clearInterval(G);v.dispatchEvent("pause")}function L(){v.dispatchEvent("timeupdate")}function y(B){z.currentTime=B;B!==H&&v.dispatchEvent("timeupdate");
H=B}function I(B){switch(B.type){case "loadProgress":v.dispatchEvent("progress");break;case "playProgress":y(B.data);break;case "play":if(!O){O=setInterval(a,h);z.loop&&v.dispatchEvent("play")}G=setInterval(L,v._util.TIMEUPDATE_MS);if(z.paused){z.paused=false;z.loop||v.dispatchEvent("play");v.dispatchEvent("playing")}break;case "pause":e();break;case "finish":if(z.loop){A(0);v.play()}else{z.ended=true;v.pause();e();v.dispatchEvent("timeupdate");v.dispatchEvent("ended")}break;case "seek":y(B.data)}}
function a(){z.ended||x.getPosition(function(B){y(B/1E3)})}function b(B){if(v._canPlaySrc(B)){z.src=B;if(C)if(C&&x){clearInterval(O);x.pause();x.unbind(SC.Widget.Events.READY);x.unbind(SC.Widget.Events.LOAD_PROGRESS);x.unbind(SC.Widget.Events.PLAY_PROGRESS);x.unbind(SC.Widget.Events.PLAY);x.unbind(SC.Widget.Events.PAUSE);x.unbind(SC.Widget.Events.SEEK);x.unbind(SC.Widget.Events.FINISH);D.removeChild(E);E=j.createElement("iframe")}if(d()){C=false;SC.get("/resolve",{url:B},function(N){E.id=p.guid("soundcloud-");
E.width=z.width;E.height=z.height;E.frameBorder=0;E.webkitAllowFullScreen=true;E.mozAllowFullScreen=true;E.allowFullScreen=true;u(z.controls);D.appendChild(E);E.onload=function(){E.onload=null;x=SC.Widget(E);x.bind(SC.Widget.Events.READY,w);z.networkState=v.NETWORK_LOADING;v.dispatchEvent("loadstart");v.dispatchEvent("progress")};E.src="https://w.soundcloud.com/player/?url="+N.uri+"&show_artwork=false&buying=false&liking=false&sharing=false&download=false&show_comments=false&show_user=false&single_active=false"})}else c(function(){b(B)})}else{z.error=
{name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};v.dispatchEvent("error")}}function o(B){z.volume=B;if(C){x.setVolume(B);v.dispatchEvent("volumechange")}else n(function(){o(B)})}function m(B){if(C)if(B){z.muted=z.volume;o(0)}else{z.muted=0;o(z.muted)}else{z.muted=B?1:0;n(function(){m(B)})}}function u(B){if(C){E.style.position="absolute";E.style.visibility=B?"visible":"hidden"}else{E.style.opacity=B?"1":"0";E.style.pointerEvents=B?"auto":"none"}z.controls=
B}if(!f.postMessage)throw"ERROR: HTMLSoundCloudAudioElement requires window.postMessage";var v=this,D=typeof t==="string"?p.dom.find(t):t,E=j.createElement("iframe"),z={src:i,networkState:v.NETWORK_EMPTY,readyState:v.HAVE_NOTHING,seeking:false,autoplay:i,preload:i,controls:false,loop:false,poster:i,volume:100,muted:0,currentTime:0,duration:NaN,ended:false,paused:true,width:D.width|0?D.width:v._util.MIN_WIDTH,height:D.height|0?D.height:v._util.MIN_HEIGHT,error:null},C=false,x,r=[],G,O,H=0;v._eventNamespace=
p.guid("HTMLSoundCloudAudioElement::");v.parentNode=D;v._util.type="SoundCloud";v.play=function(){if(C){z.ended&&A(0);x.play()}else n(function(){v.play()})};v.pause=function(){C?x.pause():n(function(){v.pause()})};Object.defineProperties(v,{src:{get:function(){return z.src},set:function(B){B&&B!==z.src&&b(B)}},autoplay:{get:function(){return z.autoplay},set:function(B){z.autoplay=v._util.isAttributeSet(B)}},loop:{get:function(){return z.loop},set:function(B){z.loop=v._util.isAttributeSet(B)}},width:{get:function(){return E.width},
set:function(B){E.width=B;z.width=E.width}},height:{get:function(){return E.height},set:function(B){E.height=B;z.height=E.height}},currentTime:{get:function(){return z.currentTime},set:function(B){A(B)}},canRatePlayback:{get:function(){return false}},duration:{get:function(){return z.duration}},ended:{get:function(){return z.ended}},paused:{get:function(){return z.paused}},seeking:{get:function(){return z.seeking}},readyState:{get:function(){return z.readyState}},networkState:{get:function(){return z.networkState}},
volume:{get:function(){return(z.muted>0?z.muted:z.volume)/100},set:function(B){if(B<0||B>1)throw"Volume value must be between 0.0 and 1.0";B*=100;o(B)}},muted:{get:function(){return z.muted>0},set:function(B){m(v._util.isAttributeSet(B))}},error:{get:function(){return z.error}},controls:{get:function(){return z.controls},set:function(B){u(!!B)}}})}var h=16,i="",k=false,q=false,l=[];g.prototype=new p._MediaElementProto;g.prototype._canPlaySrc=function(t){return/(?:https?:\/\/www\.|https?:\/\/|www\.|\.|^)(soundcloud)/.test(t)?
"probably":i};g.prototype.canPlayType=function(t){return t==="audio/x-soundcloud"?"probably":i};p.HTMLSoundCloudAudioElement=function(t){return new g(t)};p.HTMLSoundCloudAudioElement._canPlaySrc=g.prototype._canPlaySrc})(Popcorn,window,document);(function(p,f,j){function d(k){var q=this,l=k.src.split("?")[0];if(l.substr(0,2)==="//")l=f.location.protocol+l;"play pause paused seekTo unload getCurrentTime getDuration getVideoEmbedCode getVideoHeight getVideoWidth getVideoUrl getColor setColor setLoop getVolume setVolume addEventListener".split(" ").forEach(function(t){q[t]=function(n){n=JSON.stringify({method:t,value:n});k.contentWindow&&k.contentWindow.postMessage(n,l)}})}function c(k){function q(C){v.unshift(C)}function l(C){var x=b.duration;
if(x!==C){b.duration=C;y.dispatchEvent("durationchange");if(isNaN(x)){b.networkState=y.NETWORK_IDLE;b.readyState=y.HAVE_METADATA;y.dispatchEvent("loadedmetadata");y.dispatchEvent("loadeddata");b.readyState=y.HAVE_FUTURE_DATA;y.dispatchEvent("canplay");b.readyState=y.HAVE_ENOUGH_DATA;y.dispatchEvent("canplaythrough");b.autoplay&&y.play();for(C=v.length;C--;){v[C]();delete v[C]}}}}function t(C){if(o){b.seeking=true;y.dispatchEvent("seeking");u.seekTo(C)}else q(function(){t(C)})}function n(){y.dispatchEvent("timeupdate")}
function s(C){(b.currentTime=C)!==z&&y.dispatchEvent("timeupdate");z=b.currentTime}function w(C){if(C.origin===i){var x;try{x=JSON.parse(C.data)}catch(r){console.warn(r)}if(x.player_id==m)switch(x.event){case "ready":u=new d(a);u.addEventListener("loadProgress");u.addEventListener("pause");u.setVolume(0);u.play();break;case "loadProgress":if(parseFloat(x.data.duration)>0&&!o){o=true;u.pause()}break;case "pause":u.setVolume(1);f.removeEventListener("message",w,false);f.addEventListener("message",F,
false);u.addEventListener("loadProgress");u.addEventListener("playProgress");u.addEventListener("play");u.addEventListener("pause");u.addEventListener("finish");u.addEventListener("seek");u.getDuration();b.networkState=y.NETWORK_LOADING;y.dispatchEvent("loadstart");y.dispatchEvent("progress")}}}function F(C){if(C.origin===i){var x;try{x=JSON.parse(C.data)}catch(r){console.warn(r)}if(x.player_id==m){switch(x.method){case "getCurrentTime":s(parseFloat(x.value));break;case "getDuration":l(parseFloat(x.value));
break;case "getVolume":C=parseFloat(x.value);if(b.volume!==C){b.volume=C;y.dispatchEvent("volumechange")}}switch(x.event){case "loadProgress":y.dispatchEvent("progress");l(parseFloat(x.data.duration));break;case "playProgress":s(parseFloat(x.data.seconds));break;case "play":b.ended&&t(0);if(!E){E=setInterval(A,g);b.loop&&y.dispatchEvent("play")}D=setInterval(n,y._util.TIMEUPDATE_MS);if(b.paused){b.paused=false;b.loop||y.dispatchEvent("play");y.dispatchEvent("playing")}break;case "pause":b.paused=
true;clearInterval(D);y.dispatchEvent("pause");break;case "finish":if(b.loop){t(0);y.play()}else{b.ended=true;y.dispatchEvent("ended")}break;case "seek":s(parseFloat(x.data.seconds));b.seeking=false;y.dispatchEvent("timeupdate");y.dispatchEvent("seeked");y.dispatchEvent("canplay");y.dispatchEvent("canplaythrough");b.paused&&y.pause()}}}}function A(){u.getCurrentTime()}function e(C){b.volume=C;if(o){u.setVolume(C);y.dispatchEvent("volumechange")}else q(function(){e(C)})}function L(C){if(o)if(C){b.muted=
b.volume;e(0)}else{b.muted=0;e(b.muted)}else{b.muted=C?1:0;q(function(){L(C)})}}if(!f.postMessage)throw"ERROR: HTMLVimeoVideoElement requires window.postMessage";var y=this,I=typeof k==="string"?p.dom.find(k):k,a=j.createElement("iframe"),b={src:h,networkState:y.NETWORK_EMPTY,readyState:y.HAVE_NOTHING,seeking:false,autoplay:h,preload:h,controls:false,loop:false,poster:h,volume:1,muted:0,currentTime:0,duration:NaN,ended:false,paused:true,error:null},o=false,m=p.guid(),u,v=[],D,E,z=0;y._eventNamespace=
p.guid("HTMLVimeoVideoElement::");y.parentNode=I;y._util.type="Vimeo";y.play=function(){o?u.play():q(function(){y.play()})};y.pause=function(){o?u.pause():q(function(){y.pause()})};Object.defineProperties(y,{src:{get:function(){return b.src},set:function(C){if(C&&C!==b.src)if(y._canPlaySrc(C)){b.src=C;if(o)if(o&&u){clearInterval(E);u.pause();f.removeEventListener("message",F,false);I.removeChild(a);a=j.createElement("iframe")}o=false;C=y._util.parseUri(C);var x=C.queryKey,r,G=["api=1","player_id="+
m,"title=0","byline=0","portrait=0"];b.loop=x.loop==="1"||b.loop;delete x.loop;b.autoplay=x.autoplay==="1"||b.autoplay;delete x.autoplay;C=i+"/video/"+/\d+$/.exec(C.path)+"?";for(r in x)x.hasOwnProperty(r)&&G.push(encodeURIComponent(r)+"="+encodeURIComponent(x[r]));C+=G.join("&");a.id=m;a.style.width="100%";a.style.height="100%";a.frameBorder=0;a.webkitAllowFullScreen=true;a.mozAllowFullScreen=true;a.allowFullScreen=true;I.appendChild(a);a.src=C;f.addEventListener("message",w,false)}else{b.error=
{name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};y.dispatchEvent("error")}}},autoplay:{get:function(){return b.autoplay},set:function(C){b.autoplay=y._util.isAttributeSet(C)}},loop:{get:function(){return b.loop},set:function(C){b.loop=y._util.isAttributeSet(C)}},width:{get:function(){return y.parentNode.offsetWidth}},height:{get:function(){return y.parentNode.offsetHeight}},currentTime:{get:function(){return b.currentTime},set:function(C){t(C)}},
canRatePlayback:{get:function(){return false}},duration:{get:function(){return b.duration}},ended:{get:function(){return b.ended}},paused:{get:function(){return b.paused}},seeking:{get:function(){return b.seeking}},readyState:{get:function(){return b.readyState}},networkState:{get:function(){return b.networkState}},volume:{get:function(){return b.muted>0?b.muted:b.volume},set:function(C){if(C<0||C>1)throw"Volume value must be between 0.0 and 1.0";e(C)}},muted:{get:function(){return b.muted>0},set:function(C){L(y._util.isAttributeSet(C))}},
error:{get:function(){return b.error}}})}var g=16,h="",i=f.location.protocol+"//player.vimeo.com";c.prototype=new p._MediaElementProto;c.prototype.constructor=c;c.prototype._canPlaySrc=function(k){return/player.vimeo.com\/video\/\d+/.test(k)||/vimeo.com\/\d+/.test(k)?"probably":h};c.prototype.canPlayType=function(k){return k==="video/x-vimeo"?"probably":h};p.HTMLVimeoVideoElement=function(k){return new c(k)};p.HTMLVimeoVideoElement._canPlaySrc=c.prototype._canPlaySrc})(Popcorn,window,document);(function(p,f,j){function d(){if(!t){var s=j.createElement("script");s.src=(f.location.protocol==="file:"?"http:":"")+"//www.youtube.com/iframe_api";var w=j.getElementsByTagName("script")[0];w.parentNode.insertBefore(s,w);t=true}return l}function c(s){n.unshift(s)}function g(s){function w(J){Q.unshift(J)}function F(){var J=function(){M.isMuted()?M.playVideo():setTimeout(J,0)};B=true;V=setInterval(L,10);M.mute();J()}function A(){if(!P)return H.duration;var J=H.duration,K=M.getDuration();if(K){if(J!==
K){H.duration=K;r.dispatchEvent("durationchange")}}else setTimeout(A,50);return K}function e(J){var K={name:"MediaError"};switch(J.data){case 2:K.message="Invalid video parameter.";K.code=MediaError.MEDIA_ERR_ABORTED;break;case 5:K.message="The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.";K.code=MediaError.MEDIA_ERR_DECODE;case 100:K.message="Video not found.";K.code=MediaError.MEDIA_ERR_NETWORK;break;case 101:case 150:K.message=
"Video not usable.";K.code=MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED;break;default:K.message="Unknown error.";K.code=5}H.error=K;r.dispatchEvent("error")}function L(){var J=M.getPlayerState();S!==J&&y({data:J})}function y(J){switch(J.data){case YT.PlayerState.UNSTARTED:H.src=M.getVideoUrl();r.dispatchEvent("unstarted");case YT.PlayerState.ENDED:if(H.loop){m(0);r.play()}else{H.ended=true;z();T=true;r.dispatchEvent("timeupdate");r.dispatchEvent("ended")}M.seekTo(0);break;case YT.PlayerState.PLAYING:if(W){W=
false;w(function(){U=setInterval(o,50)});if(H.autoplay||!H.paused){H.paused=false;w(function(){E()})}else{N=false;M.pauseVideo()}H.muted||M.unMute();H.duration=M.getDuration();H.readyState=r.HAVE_METADATA;r.dispatchEvent("loadedmetadata");X=setInterval(b,h);r.dispatchEvent("loadeddata");H.readyState=r.HAVE_FUTURE_DATA;r.dispatchEvent("canplay");P=true;for(var K=Q.length;K--;){Q[K]();delete Q[K]}H.readyState=r.HAVE_ENOUGH_DATA;r.dispatchEvent("canplaythrough")}else if(T){T=false;M.pauseVideo()}else E();
break;case YT.PlayerState.PAUSED:if(N){N=false;break}z();break;case YT.PlayerState.BUFFERING:H.networkState=r.NETWORK_LOADING;r.dispatchEvent("waiting")}J.data!==YT.PlayerState.BUFFERING&&S===YT.PlayerState.BUFFERING&&r.dispatchEvent("progress");S=J.data}function I(){r.dispatchEvent("ratechange")}function a(J){if(r._canPlaySrc(J)){H.src=J;if(d()){if(B)if(B&&M){clearInterval(X);clearInterval(U);clearInterval(V);M.stopVideo();M.clearVideo();G.removeChild(O);O=j.createElement("div")}G.appendChild(O);
var K=r._util.parseUri(J).queryKey;delete K.v;H.autoplay=K.autoplay==="1"||H.autoplay;delete K.autoplay;H.loop=K.loop==="1"||H.loop;delete K.loop;K.rel=K.rel||0;K.modestbranding=K.modestbranding||1;K.iv_load_policy=K.iv_load_policy||3;K.showinfo=K.showinfo||0;var aa=f.location.protocol==="file:"?"*":f.location.protocol+"//"+f.location.host;K.origin=K.origin||aa;K.controls=K.controls||H.controls?2:0;H.controls=K.controls;K.wmode=K.wmode||"opaque";J=k.exec(J)[1];M=new YT.Player(O,{width:"100%",height:"100%",
wmode:K.wmode,videoId:J,playerVars:K,events:{onReady:F,onError:e,onStateChange:y,onPlaybackRateChange:I}});H.networkState=r.NETWORK_LOADING;r.dispatchEvent("loadstart");r.dispatchEvent("progress");A()}else c(function(){a(J)})}else{H.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};r.dispatchEvent("error")}}function b(){var J=M.getCurrentTime();if(H.seeking)q(J-H.currentTime)<1&&D();else{if(q(H.currentTime-J)>h){v();D()}H.currentTime=J}}function o(){var J=
M.getVideoLoadedFraction();if(Y!==J){Y=J;r.dispatchEvent("progress");J>=1&&clearInterval(U)}}function m(J){H.currentTime=J;if(P){v();M.seekTo(J)}else w(function(){v();M.seekTo(J)})}function u(){r.dispatchEvent("timeupdate")}function v(){N=true;H.seeking=true;r.dispatchEvent("seeking")}function D(){H.ended=false;H.seeking=false;r.dispatchEvent("timeupdate");r.dispatchEvent("seeked");r.dispatchEvent("canplay");r.dispatchEvent("canplaythrough")}function E(){if(H.ended){m(0);H.ended=false}Z=setInterval(u,
r._util.TIMEUPDATE_MS);H.paused=false;if(R){R=false;if(H.loop&&!$||!H.loop){$=true;r.dispatchEvent("play")}r.dispatchEvent("playing")}}function z(){H.paused=true;if(!R){R=true;clearInterval(Z);r.dispatchEvent("pause")}}function C(J){H.volume=J;if(P){M.setVolume(H.volume*100);r.dispatchEvent("volumechange")}else w(function(){C(H.volume)})}function x(J){H.muted=J;if(P){M[J?"mute":"unMute"]();r.dispatchEvent("volumechange")}else w(function(){x(H.muted)})}if(!f.postMessage)throw"ERROR: HTMLYouTubeVideoElement requires window.postMessage";
var r=this,G=typeof s==="string"?j.querySelector(s):s,O=j.createElement("div"),H={src:i,networkState:r.NETWORK_EMPTY,readyState:r.HAVE_NOTHING,seeking:false,autoplay:i,preload:i,controls:true,loop:false,poster:i,volume:1,muted:false,currentTime:0,duration:NaN,ended:false,paused:true,error:null},B=false,N=false,T=false,P=false,$=false,M,R=true,Q=[],S=-1,U,Y=0,X,V,Z,W=true;r._eventNamespace=p.guid("HTMLYouTubeVideoElement::");r.parentNode=G;r._util.type="YouTube";r.play=function(){H.paused=false;P?
M.playVideo():w(function(){r.play()})};r.pause=function(){H.paused=true;if(P){N=false;M.pauseVideo()}else w(function(){r.pause()})};Object.defineProperties(r,{src:{get:function(){return H.src},set:function(J){J&&J!==H.src&&a(J)}},autoplay:{get:function(){return H.autoplay},set:function(J){H.autoplay=r._util.isAttributeSet(J)}},loop:{get:function(){return H.loop},set:function(J){H.loop=r._util.isAttributeSet(J)}},width:{get:function(){return r.parentNode.offsetWidth}},height:{get:function(){return r.parentNode.offsetHeight}},
currentTime:{get:function(){return H.currentTime},set:function(J){m(J)}},canRatePlayback:{get:function(){return!M.cueVideoByFlashvars}},playbackRate:{get:function(){return M.getPlaybackRate()},set:function(J){M.setPlaybackRate(J)}},duration:{get:function(){return A()}},ended:{get:function(){return H.ended}},paused:{get:function(){return H.paused}},seeking:{get:function(){return H.seeking}},readyState:{get:function(){return H.readyState}},networkState:{get:function(){return H.networkState}},volume:{get:function(){return H.volume/
100},set:function(J){if(J<0||J>1)throw"Volume value must be between 0.0 and 1.0";C(J)}},muted:{get:function(){return H.muted},set:function(J){x(r._util.isAttributeSet(J))}},error:{get:function(){return H.error}},buffered:{get:function(){var J={start:function(K){if(K===0)return 0;throw"INDEX_SIZE_ERR: DOM Exception 1";},end:function(K){if(K===0){K=A();if(!K)return 0;return K*M.getVideoLoadedFraction()}throw"INDEX_SIZE_ERR: DOM Exception 1";}};Object.defineProperties(J,{length:{get:function(){return 1}}});
return J}}})}var h=10,i="",k=/^.*(?:\/|v=)(.{11})/,q=Math.abs,l=false,t=false,n=[];if(f.YT){f.quarantineYT=f.YT;f.YT=null}f.onYouTubeIframeAPIReady=function(){l=true;for(var s=n.length;s--;){n[s]();delete n[s]}if(YT&&YT.PlayerState&&!YT.PlayerState.UNSTARTED)YT.PlayerState.UNSTARTED=-1};g.prototype=new p._MediaElementProto;g.prototype.constructor=g;g.prototype._canPlaySrc=function(s){return/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu).*(?:\/|v=)(.{11})/.test(s)?"probably":i};g.prototype.canPlayType=
function(s){return s==="video/x-youtube"?"probably":i};p.HTMLYouTubeVideoElement=function(s){return new g(s)};p.HTMLYouTubeVideoElement._canPlaySrc=g.prototype._canPlaySrc})(Popcorn,window,document);(function(p){var f=function(j,d){var c=0,g=0,h;p.forEach(d.classes,function(i,k){h=[];if(i==="parent")h[0]=document.querySelectorAll("#"+d.target)[0].parentNode;else h=document.querySelectorAll("#"+d.target+" "+i);c=0;for(g=h.length;c<g;c++)h[c].classList.toggle(k)})};p.compose("applyclass",{manifest:{about:{name:"Popcorn applyclass Effect",version:"0.1",author:"@scottdowne",website:"scottdowne.wordpress.com"},options:{}},_setup:function(j){j.classes={};j.applyclass=j.applyclass||"";for(var d=j.applyclass.replace(/\s/g,
"").split(","),c=[],g=0,h=d.length;g<h;g++){c=d[g].split(":");if(c[0])j.classes[c[0]]=c[1]||""}},start:f,end:f})})(Popcorn);(function(p){p.plugin("code",function(f){var j=false,d=this,c=function(){var g=function(h){return function(i,k){var q=function(){j&&i.call(d,k);j&&h(q)};q()}};return window.webkitRequestAnimationFrame?g(window.webkitRequestAnimationFrame):window.mozRequestAnimationFrame?g(window.mozRequestAnimationFrame):g(function(h){window.setTimeout(h,16)})}();if(!f.onStart||typeof f.onStart!=="function")f.onStart=p.nop;if(f.onEnd&&typeof f.onEnd!=="function")f.onEnd=undefined;if(f.onFrame&&typeof f.onFrame!==
"function")f.onFrame=undefined;return{start:function(g,h){h.onStart.call(d,h);if(h.onFrame){j=true;c(h.onFrame,h)}},end:function(g,h){if(h.onFrame)j=false;h.onEnd&&h.onEnd.call(d,h)}}},{about:{name:"Popcorn Code Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},onStart:{elem:"input",type:"function",label:"onStart"},onFrame:{elem:"input",type:"function",label:"onFrame",
optional:true},onEnd:{elem:"input",type:"function",label:"onEnd"}}})})(Popcorn);(function(p,f){var j={};p.plugin("documentcloud",{manifest:{about:{name:"Popcorn Document Cloud Plugin",version:"0.1",author:"@humphd, @ChrisDeCairos",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"documentcloud-container",width:{elem:"input",type:"text",label:"Width",optional:true},height:{elem:"input",type:"text",label:"Height",optional:true},src:{elem:"input",type:"url",label:"PDF URL","default":"http://www.documentcloud.org/documents/70050-urbina-day-1-in-progress.html"},
preload:{elem:"input",type:"checkbox",label:"Preload","default":true},page:{elem:"input",type:"number",label:"Page Number",optional:true},aid:{elem:"input",type:"number",label:"Annotation Id",optional:true}}},_setup:function(d){function c(){function l(m){d._key=m.api.getId();d._changeView=function(u){d.aid?u.pageSet.showAnnotation(u.api.getAnnotation(d.aid)):u.api.setCurrentPage(d.page)}}function t(){j[d._key]={num:1,id:d._containerId};h.loaded=true}h.loaded=false;var n=d.url.replace(/\.html$/,".js"),
s=d.target,w=f.getElementById(s),F=f.createElement("div"),A=p.position(w),e=d.width||A.width;A=d.height||A.height;var L=d.sidebar||true,y=d.text||true,I=d.pdf||true,a=d.showAnnotations||true,b=d.zoom||700,o=d.search||true;if(!function(m){var u=false;p.forEach(h.viewers,function(v){if(v.api.getSchema().canonicalURL===m){l(v);v=j[d._key];d._containerId=v.id;v.num+=1;u=true;h.loaded=true}});return u}(d.url)){F.id=d._containerId=p.guid(s);s="#"+F.id;w.appendChild(F);i.trigger("documentready");h.load(n,
{width:e,height:A,sidebar:L,text:y,pdf:I,showAnnotations:a,zoom:b,search:o,container:s,afterLoad:d.page||d.aid?function(m){l(m);d._changeView(m);F.style.visibility="hidden";m.elements.pages.hide();t()}:function(m){l(m);t();F.style.visibility="hidden";m.elements.pages.hide()}})}}function g(){window.DV.loaded?c():setTimeout(g,25)}var h=window.DV=window.DV||{},i=this;if(h.loading)g();else{h.loading=true;h.recordHit="//www.documentcloud.org/pixel.gif";var k=f.createElement("link"),q=f.getElementsByTagName("head")[0];
k.rel="stylesheet";k.type="text/css";k.media="screen";k.href="//s3.documentcloud.org/viewer/viewer-datauri.css";q.appendChild(k);h.loaded=false;p.getScript("http://s3.documentcloud.org/viewer/viewer.js",function(){h.loading=false;c()})}d.toString=function(){return d.src||d._natives.manifest.options.src["default"]}},start:function(d,c){var g=f.getElementById(c._containerId),h=DV.viewers[c._key];(c.page||c.aid)&&h&&c._changeView(h);if(g&&h){g.style.visibility="visible";h.elements.pages.show()}},end:function(d,
c){var g=f.getElementById(c._containerId);if(g&&DV.viewers[c._key]){g.style.visibility="hidden";DV.viewers[c._key].elements.pages.hide()}},_teardown:function(d){var c=f.getElementById(d._containerId);if((d=d._key)&&DV.viewers[d]&&--j[d].num===0){for(DV.viewers[d].api.unload();c.hasChildNodes();)c.removeChild(c.lastChild);c.parentNode.removeChild(c)}}})})(Popcorn,window.document);(function(p){var f=0;p.plugin("flickr",function(j){var d,c=document.getElementById(j.target),g,h,i,k,q=j.numberofimages||4,l=j.height||"50px",t=j.width||"50px",n=j.padding||"5px",s=j.border||"0px";d=document.createElement("div");d.id="flickr"+f;d.style.width="100%";d.style.height="100%";d.style.display="none";f++;c&&c.appendChild(d);var w=function(){if(g)setTimeout(function(){w()},5);else{h="http://api.flickr.com/services/rest/?method=flickr.people.findByUsername&";h+="username="+j.username+"&api_key="+
j.apikey+"&format=json&jsoncallback=flickr";p.getJSONP(h,function(A){g=A.user.nsid;F()})}},F=function(){h="http://api.flickr.com/services/feeds/photos_public.gne?";if(g)h+="id="+g+"&";if(j.tags)h+="tags="+j.tags+"&";h+="lang=en-us&format=json&jsoncallback=flickr";p.xhr.getJSONP(h,function(A){var e=document.createElement("div");e.innerHTML="<p style='padding:"+n+";'>"+A.title+"<p/>";p.forEach(A.items,function(L,y){if(y<q){i=document.createElement("a");i.setAttribute("href",L.link);i.setAttribute("target",
"_blank");k=document.createElement("img");k.setAttribute("src",L.media.m);k.setAttribute("height",l);k.setAttribute("width",t);k.setAttribute("style","border:"+s+";padding:"+n);i.appendChild(k);e.appendChild(i)}else return false});d.appendChild(e)})};if(j.username&&j.apikey)w();else{g=j.userid;F()}j.toString=function(){return j.tags||j.username||"Flickr"};return{start:function(){d.style.display="inline"},end:function(){d.style.display="none"},_teardown:function(A){document.getElementById(A.target)&&
document.getElementById(A.target).removeChild(d)}}},{about:{name:"Popcorn Flickr Plugin",version:"0.2",author:"Scott Downe, Steven Weerdenburg, Annasob",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},userid:{elem:"input",type:"text",label:"User ID",optional:true},tags:{elem:"input",type:"text",label:"Tags"},username:{elem:"input",type:"text",label:"Username",optional:true},apikey:{elem:"input",type:"text",
label:"API Key",optional:true},target:"flickr-container",height:{elem:"input",type:"text",label:"Height","default":"50px",optional:true},width:{elem:"input",type:"text",label:"Width","default":"50px",optional:true},padding:{elem:"input",type:"text",label:"Padding",optional:true},border:{elem:"input",type:"text",label:"Border","default":"5px",optional:true},numberofimages:{elem:"input",type:"number","default":4,label:"Number of Images"}}})})(Popcorn);(function(p){p.plugin("footnote",{manifest:{about:{name:"Popcorn Footnote Plugin",version:"0.2",author:"@annasob, @rwaldron",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text"},target:"footnote-container"}},_setup:function(f){var j=p.dom.find(f.target);f._container=document.createElement("div");f._container.style.display="none";f._container.innerHTML=f.text;j.appendChild(f._container)},
start:function(f,j){j._container.style.display="inline"},end:function(f,j){j._container.style.display="none"},_teardown:function(f){var j=p.dom.find(f.target);j&&j.removeChild(f._container)}})})(Popcorn);(function(p){var f=1,j=false;p.plugin("googlefeed",function(d){var c=function(){var k=false,q=0,l=document.getElementsByTagName("link"),t=l.length,n=document.head||document.getElementsByTagName("head")[0],s=document.createElement("link");if(window.GFdynamicFeedControl)j=true;else p.getScript("//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.js",function(){j=true});for(;q<t;q++)if(l[q].href==="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css")k=true;if(!k){s.type=
"text/css";s.rel="stylesheet";s.href="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css";n.insertBefore(s,n.firstChild)}};window.google?c():p.getScript("//www.google.com/jsapi",function(){google.load("feeds","1",{callback:function(){c()}})});var g=document.createElement("div"),h=document.getElementById(d.target),i=function(){if(j)d.feed=new GFdynamicFeedControl(d.url,g,{vertical:d.orientation.toLowerCase()==="vertical"?true:false,horizontal:d.orientation.toLowerCase()==="horizontal"?
true:false,title:d.title=d.title||"Blog"});else setTimeout(function(){i()},5)};if(!d.orientation||d.orientation.toLowerCase()!=="vertical"&&d.orientation.toLowerCase()!=="horizontal")d.orientation="vertical";g.style.display="none";g.id="_feed"+f;g.style.width="100%";g.style.height="100%";f++;h&&h.appendChild(g);i();d.toString=function(){return d.url||d._natives.manifest.options.url["default"]};return{start:function(){g.setAttribute("style","display:inline")},end:function(){g.setAttribute("style",
"display:none")},_teardown:function(k){document.getElementById(k.target)&&document.getElementById(k.target).removeChild(g);delete k.feed}}},{about:{name:"Popcorn Google Feed Plugin",version:"0.1",author:"David Seifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",url:{elem:"input",type:"url",label:"Feed URL","default":"http://planet.mozilla.org/rss20.xml"},title:{elem:"input",type:"text",
label:"Title","default":"Planet Mozilla",optional:true},orientation:{elem:"select",options:["Vertical","Horizontal"],label:"Orientation","default":"Vertical",optional:true}}})})(Popcorn);var googleCallback;
(function(p){function f(i,k,q){i=i.type?i.type.toUpperCase():"HYBRID";var l;if(i==="STAMEN-WATERCOLOR"||i==="STAMEN-TERRAIN"||i==="STAMEN-TONER")l=i.replace("STAMEN-","").toLowerCase();q=new google.maps.Map(q,{mapTypeId:l?l:google.maps.MapTypeId[i],mapTypeControlOptions:{mapTypeIds:[]}});l&&q.mapTypes.set(l,new google.maps.StamenMapType(l));q.getDiv().style.display="none";return q}var j=1,d=false,c=false,g,h;googleCallback=function(i){if(typeof google!=="undefined"&&google.maps&&google.maps.Geocoder&&
google.maps.LatLng){g=new google.maps.Geocoder;p.getScript("//maps.stamen.com/js/tile.stamen.js",function(){c=true})}else setTimeout(function(){googleCallback(i)},1)};h=function(){if(document.body){d=true;p.getScript("//maps.google.com/maps/api/js?sensor=false&callback=googleCallback")}else setTimeout(function(){h()},1)};p.plugin("googlemap",function(i){var k,q,l,t=document.getElementById(i.target);i.type=i.type||"ROADMAP";i.zoom=i.zoom||1;i.lat=i.lat||0;i.lng=i.lng||0;d||h();k=document.createElement("div");
k.id="actualmap"+j;k.style.width=i.width||"100%";k.style.height=i.height?i.height:t&&t.clientHeight?t.clientHeight+"px":"100%";j++;t&&t.appendChild(k);var n=function(){if(c){if(k)if(i.location)g.geocode({address:i.location},function(s,w){if(k&&w===google.maps.GeocoderStatus.OK){i.lat=s[0].geometry.location.lat();i.lng=s[0].geometry.location.lng();l=new google.maps.LatLng(i.lat,i.lng);q=f(i,l,k)}});else{l=new google.maps.LatLng(i.lat,i.lng);q=f(i,l,k)}}else setTimeout(function(){n()},5)};n();i.toString=
function(){return i.location||(i.lat&&i.lng?i.lat+", "+i.lng:i._natives.manifest.options.location["default"])};return{start:function(s,w){var F=this,A,e=function(){if(q){w._map=q;q.getDiv().style.display="block";google.maps.event.trigger(q,"resize");q.setCenter(l);if(w.zoom&&typeof w.zoom!=="number")w.zoom=+w.zoom;q.setZoom(w.zoom);if(w.heading&&typeof w.heading!=="number")w.heading=+w.heading;if(w.pitch&&typeof w.pitch!=="number")w.pitch=+w.pitch;if(w.type==="STREETVIEW"){q.setStreetView(A=new google.maps.StreetViewPanorama(k,
{position:l,pov:{heading:w.heading=w.heading||0,pitch:w.pitch=w.pitch||0,zoom:w.zoom}}));var L=function(u,v){var D=google.maps.geometry.spherical.computeHeading;setTimeout(function(){var E=F.media.currentTime;if(typeof w.tween==="object"){for(var z=0,C=u.length;z<C;z++){var x=u[z];if(E>=x.interval*(z+1)/1E3&&(E<=x.interval*(z+2)/1E3||E>=x.interval*C/1E3)){o.setPosition(new google.maps.LatLng(x.position.lat,x.position.lng));o.setPov({heading:x.pov.heading||D(x,u[z+1])||0,zoom:x.pov.zoom||0,pitch:x.pov.pitch||
0})}}L(u,u[0].interval)}else{z=0;for(C=u.length;z<C;z++){x=w.interval;if(E>=x*(z+1)/1E3&&(E<=x*(z+2)/1E3||E>=x*C/1E3)){y.setPov({heading:D(u[z],u[z+1])||0,zoom:w.zoom,pitch:w.pitch||0});y.setPosition(I[z])}}L(I,w.interval)}},v)};if(w.location&&typeof w.tween==="string"){var y=A,I=[],a=new google.maps.DirectionsService,b=new google.maps.DirectionsRenderer(y);a.route({origin:w.location,destination:w.tween,travelMode:google.maps.TravelMode.DRIVING},function(u,v){if(v==google.maps.DirectionsStatus.OK){b.setDirections(u);
for(var D=u.routes[0].overview_path,E=0,z=D.length;E<z;E++)I.push(new google.maps.LatLng(D[E].lat(),D[E].lng()));w.interval=w.interval||1E3;L(I,10)}})}else if(typeof w.tween==="object"){var o=A;a=0;for(var m=w.tween.length;a<m;a++){w.tween[a].interval=w.tween[a].interval||1E3;L(w.tween,10)}}}w.onmaploaded&&w.onmaploaded(w,q)}else setTimeout(function(){e()},13)};e()},end:function(){if(q)q.getDiv().style.display="none"},_teardown:function(s){var w=document.getElementById(s.target);w&&w.removeChild(k);
k=q=l=null;s._map=null}}},{about:{name:"Popcorn Google Map Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"start",label:"Start"},end:{elem:"input",type:"start",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","STREETVIEW","HYBRID","TERRAIN","STAMEN-WATERCOLOR","STAMEN-TERRAIN","STAMEN-TONER"],label:"Map Type",optional:true},zoom:{elem:"input",type:"text",label:"Zoom","default":0,optional:true},lat:{elem:"input",
type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},heading:{elem:"input",type:"text",label:"Heading","default":0,optional:true},pitch:{elem:"input",type:"text",label:"Pitch","default":1,optional:true}}})})(Popcorn);(function(p){function f(c){function g(){var q=c.getBoundingClientRect(),l=i.getBoundingClientRect();if(l.left!==q.left)i.style.left=q.left+"px";if(l.top!==q.top)i.style.top=q.top+"px"}var h=-1,i=document.createElement("div"),k=getComputedStyle(c).zIndex;i.setAttribute("data-popcorn-helper-container",true);i.style.position="absolute";i.style.zIndex=isNaN(k)?j:k+1;document.body.appendChild(i);return{element:i,start:function(){h=setInterval(g,d)},stop:function(){clearInterval(h);h=-1},destroy:function(){document.body.removeChild(i);
h!==-1&&clearInterval(h)}}}var j=2E3,d=10;p.plugin("image",{manifest:{about:{name:"Popcorn image Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Image URL","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png"},href:{elem:"input",type:"url",label:"Link","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png",
optional:true},target:"image-container",text:{elem:"input",type:"text",label:"Caption","default":"Popcorn.js",optional:true}}},_setup:function(c){var g=document.createElement("img"),h=document.getElementById(c.target);c.anchor=document.createElement("a");c.anchor.style.position="relative";c.anchor.style.textDecoration="none";c.anchor.style.display="none";if(h)if(["VIDEO","AUDIO"].indexOf(h.nodeName)>-1){c.trackedContainer=f(h);c.trackedContainer.element.appendChild(c.anchor)}else h&&h.appendChild(c.anchor);
g.addEventListener("load",function(){g.style.borderStyle="none";c.anchor.href=c.href||c.src||"#";c.anchor.target="_blank";var i,k;g.style.height=h.style.height;g.style.width=h.style.width;c.anchor.appendChild(g);if(c.text){i=g.height/12+"px";k=document.createElement("div");p.extend(k.style,{color:"black",fontSize:i,fontWeight:"bold",position:"relative",textAlign:"center",width:g.style.width||g.width+"px",zIndex:"10"});k.innerHTML=c.text||"";k.style.top=(g.style.height.replace("px","")||g.height)/
2-k.offsetHeight/2+"px";c.anchor.insertBefore(k,g)}},false);g.src=c.src;c.toString=function(){var i=c.src||c._natives.manifest.options.src["default"],k=i.replace(/.*\//g,"");return k.length?k:i}},start:function(c,g){g.anchor.style.display="inline";g.trackedContainer&&g.trackedContainer.start()},end:function(c,g){g.anchor.style.display="none";g.trackedContainer&&g.trackedContainer.stop()},_teardown:function(c){if(c.trackedContainer)c.trackedContainer.destroy();else c.anchor.parentNode&&c.anchor.parentNode.removeChild(c.anchor)}})})(Popcorn);(function(p){var f=/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu|vimeo|soundcloud|baseplayer)/,j={},d={vimeo:false,youtube:false,soundcloud:false,module:false};Object.defineProperty(j,void 0,{get:function(){return d[void 0]},set:function(c){d[void 0]=c}});p.plugin("mediaspawner",{manifest:{about:{name:"Popcorn Media Spawner Plugin",version:"0.1",author:"Matthew Schranz, @mjschranz",website:"mschranz.wordpress.com"},options:{source:{elem:"input",type:"text",label:"Media Source","default":"http://www.youtube.com/watch?v=CXDstfD9eJ0"},
caption:{elem:"input",type:"text",label:"Media Caption","default":"Popcorn Popping",optional:true},target:"mediaspawner-container",start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},autoplay:{elem:"input",type:"checkbox",label:"Autoplay Video",optional:true},width:{elem:"input",type:"number",label:"Media Width","default":400,units:"px",optional:true},height:{elem:"input",type:"number",label:"Media Height","default":200,units:"px",optional:true}}},_setup:function(c){function g(){function t(){if(k!==
"HTML5"&&!window.Popcorn[k])setTimeout(function(){t()},300);else{c.id=c._container.id;c._container.style.width=c.width+"px";c._container.style.height=c.height+"px";c.popcorn=p.smart("#"+c.id,c.source);k==="HTML5"&&c.popcorn.controls(true);c._container.style.width="0px";c._container.style.height="0px";c._container.style.visibility="hidden";c._container.style.overflow="hidden"}}if(k!=="HTML5"&&!window.Popcorn[k]&&!j[k]){j[k]=true;p.getScript("http://popcornjs.org/code/players/"+k+"/popcorn."+k+".js",
function(){t()})}else t()}function h(){window.Popcorn.player?g():setTimeout(function(){h()},300)}var i=document.getElementById(c.target)||{},k,q,l;if(q=f.exec(c.source)){k=q[1];if(k==="youtu")k="youtube"}else k="HTML5";c._type=k;c._container=document.createElement("div");q=c._container;q.id="mediaSpawnerdiv-"+p.guid();c.width=c.width||400;c.height=c.height||200;if(c.caption){l=document.createElement("div");l.innerHTML=c.caption;l.style.display="none";c._capCont=l;q.appendChild(l)}i&&i.appendChild(q);
if(!window.Popcorn.player&&!j.module){j.module=true;p.getScript("http://popcornjs.org/code/modules/player/popcorn.player.js",h)}else h();c.toString=function(){return c.source||c._natives.manifest.options.source["default"]}},start:function(c,g){if(g._capCont)g._capCont.style.display="";g._container.style.width=g.width+"px";g._container.style.height=g.height+"px";g._container.style.visibility="visible";g._container.style.overflow="visible";g.autoplay&&g.popcorn.play()},end:function(c,g){if(g._capCont)g._capCont.style.display=
"none";g._container.style.width="0px";g._container.style.height="0px";g._container.style.visibility="hidden";g._container.style.overflow="hidden";g.popcorn.pause()},_teardown:function(c){c.popcorn&&c.popcorn.destory&&c.popcorn.destroy();document.getElementById(c.target)&&document.getElementById(c.target).removeChild(c._container)}})})(Popcorn,this);(function(p){p.plugin("mustache",function(f){var j,d,c,g;p.getScript("http://mustache.github.com/extras/mustache.js");var h=!!f.dynamic,i=typeof f.template,k=typeof f.data,q=document.getElementById(f.target);f.container=q||document.createElement("div");if(i==="function")if(h)c=f.template;else g=f.template(f);else g=i==="string"?f.template:"";if(k==="function")if(h)j=f.data;else d=f.data(f);else d=k==="string"?JSON.parse(f.data):k==="object"?f.data:"";return{start:function(l,t){var n=function(){if(window.Mustache){if(j)d=
j(t);if(c)g=c(t);var s=Mustache.to_html(g,d).replace(/^\s*/mg,"");t.container.innerHTML=s}else setTimeout(function(){n()},10)};n()},end:function(l,t){t.container.innerHTML=""},_teardown:function(){j=d=c=g=null}}},{about:{name:"Popcorn Mustache Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"mustache-container",template:{elem:"input",type:"text",
label:"Template"},data:{elem:"input",type:"text",label:"Data"},dynamic:{elem:"input",type:"checkbox",label:"Dynamic","default":true}}})})(Popcorn);(function(p){function f(d,c){if(d.map)d.map.div.style.display=c;else setTimeout(function(){f(d,c)},10)}var j=1;p.plugin("openmap",function(d){var c,g,h,i,k,q,l,t,n=document.getElementById(d.target);c=document.createElement("div");c.id="openmapdiv"+j;c.style.width="100%";c.style.height="100%";j++;n&&n.appendChild(c);t=function(){if(window.OpenLayers&&window.OpenLayers.Layer.Stamen){if(d.location){location=new OpenLayers.LonLat(0,0);p.getJSONP("//tinygeocoder.com/create-api.php?q="+d.location+"&callback=jsonp",
function(w){g=new OpenLayers.LonLat(w[1],w[0])})}else g=new OpenLayers.LonLat(d.lng,d.lat);d.type=d.type||"ROADMAP";switch(d.type){case "SATELLITE":d.map=new OpenLayers.Map({div:c,maxResolution:0.28125,tileSize:new OpenLayers.Size(512,512)});var s=new OpenLayers.Layer.WorldWind("LANDSAT","//worldwind25.arc.nasa.gov/tile/tile.aspx",2.25,4,{T:"105"});d.map.addLayer(s);i=new OpenLayers.Projection("EPSG:4326");h=new OpenLayers.Projection("EPSG:4326");break;case "TERRAIN":i=new OpenLayers.Projection("EPSG:4326");
h=new OpenLayers.Projection("EPSG:4326");d.map=new OpenLayers.Map({div:c,projection:h});s=new OpenLayers.Layer.WMS("USGS Terraserver","//terraserver-usa.org/ogcmap.ashx?",{layers:"DRG"});d.map.addLayer(s);break;case "STAMEN-TONER":case "STAMEN-WATERCOLOR":case "STAMEN-TERRAIN":s=d.type.replace("STAMEN-","").toLowerCase();s=new OpenLayers.Layer.Stamen(s);i=new OpenLayers.Projection("EPSG:4326");h=new OpenLayers.Projection("EPSG:900913");g=g.transform(i,h);d.map=new OpenLayers.Map({div:c,projection:h,
displayProjection:i,controls:[new OpenLayers.Control.Navigation,new OpenLayers.Control.PanPanel,new OpenLayers.Control.ZoomPanel]});d.map.addLayer(s);break;default:h=new OpenLayers.Projection("EPSG:900913");i=new OpenLayers.Projection("EPSG:4326");g=g.transform(i,h);d.map=new OpenLayers.Map({div:c,projection:h,displayProjection:i});s=new OpenLayers.Layer.OSM;d.map.addLayer(s)}if(d.map){d.map.setCenter(g,d.zoom||10);d.map.div.style.display="none"}}else setTimeout(function(){t()},50)};t();return{_setup:function(s){window.OpenLayers||
p.getScript("//openlayers.org/api/OpenLayers.js",function(){p.getScript("//maps.stamen.com/js/tile.stamen.js")});var w=function(){if(s.map){s.zoom=s.zoom||2;if(s.zoom&&typeof s.zoom!=="number")s.zoom=+s.zoom;s.map.setCenter(g,s.zoom);if(s.markers){var F=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style["default"]),A=function(m){clickedFeature=m.feature;if(clickedFeature.attributes.text){l=new OpenLayers.Popup.FramedCloud("featurePopup",clickedFeature.geometry.getBounds().getCenterLonLat(),
new OpenLayers.Size(120,250),clickedFeature.attributes.text,null,true,function(){q.unselect(this.feature)});clickedFeature.popup=l;l.feature=clickedFeature;s.map.addPopup(l)}},e=function(m){feature=m.feature;if(feature.popup){l.feature=null;s.map.removePopup(feature.popup);feature.popup.destroy();feature.popup=null}},L=function(m){p.getJSONP("//tinygeocoder.com/create-api.php?q="+m.location+"&callback=jsonp",function(u){u=(new OpenLayers.Geometry.Point(u[1],u[0])).transform(i,h);var v=OpenLayers.Util.extend({},
F);if(!m.size||isNaN(m.size))m.size=14;v.pointRadius=m.size;v.graphicOpacity=1;v.externalGraphic=m.icon;u=new OpenLayers.Feature.Vector(u,null,v);if(m.text)u.attributes={text:m.text};k.addFeatures([u])})};k=new OpenLayers.Layer.Vector("Point Layer",{style:F});s.map.addLayer(k);for(var y=0,I=s.markers.length;y<I;y++){var a=s.markers[y];if(a.text)if(!q){q=new OpenLayers.Control.SelectFeature(k);s.map.addControl(q);q.activate();k.events.on({featureselected:A,featureunselected:e})}if(a.location)L(a);
else{var b=(new OpenLayers.Geometry.Point(a.lng,a.lat)).transform(i,h),o=OpenLayers.Util.extend({},F);if(!a.size||isNaN(a.size))a.size=14;o.pointRadius=a.size;o.graphicOpacity=1;o.externalGraphic=a.icon;b=new OpenLayers.Feature.Vector(b,null,o);if(a.text)b.attributes={text:a.text};k.addFeatures([b])}}}}else setTimeout(function(){w()},13)};w()},start:function(s,w){f(w,"block")},end:function(s,w){f(w,"none")},_teardown:function(){n&&n.removeChild(c);c=map=g=h=i=k=q=l=null}}},{about:{name:"Popcorn OpenMap Plugin",
version:"0.3",author:"@mapmeld",website:"mapadelsur.blogspot.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","TERRAIN"],label:"Map Type",optional:true},zoom:{elem:"input",type:"number",label:"Zoom","default":2},lat:{elem:"input",type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location",
"default":"Toronto, Ontario, Canada"},markers:{elem:"input",type:"text",label:"List Markers",optional:true}}})})(Popcorn);document.addEventListener("click",function(p){p=p.target;if(p.nodeName==="A"||p.parentNode&&p.parentNode.nodeName==="A")Popcorn.instances.forEach(function(f){f.options.pauseOnLinkClicked&&f.pause()})},false);(function(p){var f=0,j=function(d,c){var g=d.container=document.createElement("div"),h=g.style,i=d.media,k=function(){var q=d.position();h.fontSize="18px";h.width=i.offsetWidth+"px";h.top=q.top+i.offsetHeight-g.offsetHeight-40+"px";h.left=q.left+"px";setTimeout(k,10)};g.id=c||p.guid();h.position="absolute";h.color="white";h.textShadow="black 2px 2px 6px";h.fontWeight="bold";h.textAlign="center";k();d.media.parentNode.appendChild(g);return g};p.plugin("subtitle",{manifest:{about:{name:"Popcorn Subtitle Plugin",
version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"text",label:"Start"},end:{elem:"input",type:"text",label:"End"},target:"subtitle-container",text:{elem:"input",type:"text",label:"Text"}}},_setup:function(d){var c=document.createElement("div");c.id="subtitle-"+f++;c.style.display="none";!this.container&&(!d.target||d.target==="subtitle-container")&&j(this);d.container=d.target&&d.target!=="subtitle-container"?document.getElementById(d.target)||
j(this,d.target):this.container;document.getElementById(d.container.id)&&document.getElementById(d.container.id).appendChild(c);d.innerContainer=c;d.showSubtitle=function(){d.innerContainer.innerHTML=d.text||""}},start:function(d,c){c.innerContainer.style.display="inline";c.showSubtitle(c,c.text)},end:function(d,c){c.innerContainer.style.display="none";c.innerContainer.innerHTML=""},_teardown:function(d){d.container.removeChild(d.innerContainer)}})})(Popcorn);(function(p){function f(c){return String(c).replace(/&(?!\w+;)|[<>"']/g,function(g){return d[g]||g})}function j(c,g){var h=c.container=document.createElement("div"),i=h.style,k=c.media,q=function(){var l=c.position();i.fontSize="18px";i.width=k.offsetWidth+"px";i.top=l.top+k.offsetHeight-h.offsetHeight-40+"px";i.left=l.left+"px";setTimeout(q,10)};h.id=g||"";i.position="absolute";i.color="white";i.textShadow="black 2px 2px 6px";i.fontWeight="bold";i.textAlign="center";q();c.media.parentNode.appendChild(h);
return h}var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};p.plugin("text",{manifest:{about:{name:"Popcorn Text Plugin",version:"0.1",author:"@humphd"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},escape:{elem:"input",type:"checkbox",label:"Escape"},multiline:{elem:"input",type:"checkbox",label:"Multiline"}}},_setup:function(c){var g,h,i=c._container=document.createElement("div");
i.style.display="none";if(c.target)if(g=p.dom.find(c.target)){if(["VIDEO","AUDIO"].indexOf(g.nodeName)>-1)g=j(this,c.target+"-overlay")}else g=j(this,c.target);else g=this.container?this.container:j(this);c._target=g;h=c.escape?f(c.text):c.text;h=c.multiline?h.replace(/\r?\n/gm,"<br>"):h;i.innerHTML=h||"";g.appendChild(i);c.toString=function(){return c.text||c._natives.manifest.options.text["default"]}},start:function(c,g){g._container.style.display="inline"},end:function(c,g){g._container.style.display=
"none"},_teardown:function(c){var g=c._target;g&&g.removeChild(c._container)}})})(Popcorn);(function(p){var f=1;p.plugin("timeline",function(j){var d=document.getElementById(j.target),c=document.createElement("div"),g,h=true;if(d&&!d.firstChild){d.appendChild(g=document.createElement("div"));g.style.width="inherit";g.style.height="inherit";g.style.overflow="auto"}else g=d.firstChild;c.style.display="none";c.id="timelineDiv"+f;j.direction=j.direction||"up";if(j.direction.toLowerCase()==="down")h=false;if(d&&g)h?g.insertBefore(c,g.firstChild):g.appendChild(c);f++;c.innerHTML="<p><span id='big' style='font-size:24px; line-height: 130%;' >"+
j.title+"</span><br /><span id='mid' style='font-size: 16px;'>"+j.text+"</span><br />"+j.innerHTML;return{start:function(i,k){c.style.display="block";if(k.direction==="down")g.scrollTop=g.scrollHeight},end:function(){c.style.display="none"},_teardown:function(){g&&c&&g.removeChild(c)&&!g.firstChild&&d.removeChild(g)}}},{about:{name:"Popcorn Timeline Plugin",version:"0.1",author:"David Seifried @dcseifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},
end:{elem:"input",type:"number",label:"End"},target:"feed-container",title:{elem:"input",type:"text",label:"Title"},text:{elem:"input",type:"text",label:"Text"},innerHTML:{elem:"input",type:"text",label:"HTML Code",optional:true},direction:{elem:"select",options:["DOWN","UP"],label:"Direction",optional:true}}})})(Popcorn);(function(p){var f=false;p.plugin("twitter",{manifest:{about:{name:"Popcorn Twitter Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"text",label:"Tweet Source (# or @)","default":"@popcornjs"},target:"twitter-container",height:{elem:"input",type:"number",label:"Height","default":"200",optional:true},width:{elem:"input",type:"number",label:"Width",
"default":"250",optional:true}}},_setup:function(j){if(!window.TWTR&&!f){f=true;p.getScript("//widgets.twimg.com/j/2/widget.js")}var d=document.getElementById(j.target);j.container=document.createElement("div");j.container.setAttribute("id",p.guid());j.container.style.display="none";d&&d.appendChild(j.container);var c=j.src||"";d=j.width||250;var g=j.height||200,h=/^@/.test(c),i={version:2,id:j.container.getAttribute("id"),rpp:30,width:d,height:g,interval:6E3,theme:{shell:{background:"#ffffff",color:"#000000"},
tweets:{background:"#ffffff",color:"#444444",links:"#1985b5"}},features:{loop:true,timestamp:true,avatars:true,hashtags:true,toptweets:true,live:true,scrollbar:false,behavior:"default"}},k=function(q){if(window.TWTR)if(h){i.type="profile";(new TWTR.Widget(i)).render().setUser(c).start()}else{i.type="search";i.search=c;i.subject=c;(new TWTR.Widget(i)).render().start()}else setTimeout(function(){k(q)},1)};j.toString=function(){return j.src||j._natives.manifest.options.src["default"]};k(this)},start:function(j,
d){d.container.style.display="inline"},end:function(j,d){d.container.style.display="none"},_teardown:function(j){document.getElementById(j.target)&&document.getElementById(j.target).removeChild(j.container)}})})(Popcorn);(function(p){p.plugin("webpage",{manifest:{about:{name:"Popcorn Webpage Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{id:{elem:"input",type:"text",label:"Id",optional:true},start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Webpage URL","default":"http://mozillapopcorn.org"},target:"iframe-container"}},_setup:function(f){var j=document.getElementById(f.target);f.src=f.src.replace(/^(https?:)?(\/\/)?/,
"//");f._iframe=document.createElement("iframe");f._iframe.setAttribute("width","100%");f._iframe.setAttribute("height","100%");f._iframe.id=f.id;f._iframe.src=f.src;f._iframe.style.display="none";j&&j.appendChild(f._iframe)},start:function(f,j){j._iframe.src=j.src;j._iframe.style.display="inline"},end:function(f,j){j._iframe.style.display="none"},_teardown:function(f){document.getElementById(f.target)&&document.getElementById(f.target).removeChild(f._iframe)}})})(Popcorn);var wikiCallback;
(function(p){p.plugin("wikipedia",{manifest:{about:{name:"Popcorn Wikipedia Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},lang:{elem:"input",type:"text",label:"Language","default":"english",optional:true},src:{elem:"input",type:"url",label:"Wikipedia URL","default":"http://en.wikipedia.org/wiki/Cat"},title:{elem:"input",type:"text",label:"Title","default":"Cats",optional:true},
numberofwords:{elem:"input",type:"number",label:"Number of Words","default":"200",optional:true},target:"wikipedia-container"}},_setup:function(f){var j,d=p.guid();if(!f.lang)f.lang="en";f.numberofwords=f.numberofwords||200;window["wikiCallback"+d]=function(c){f._link=document.createElement("a");f._link.setAttribute("href",f.src);f._link.setAttribute("target","_blank");f._link.innerHTML=f.title||c.parse.displaytitle;f._desc=document.createElement("p");j=c.parse.text["*"].substr(c.parse.text["*"].indexOf("<p>"));
j=j.replace(/((<(.|\n)+?>)|(\((.*?)\) )|(\[(.*?)\]))/g,"");j=j.split(" ");f._desc.innerHTML=j.slice(0,j.length>=f.numberofwords?f.numberofwords:j.length).join(" ")+" ...";f._fired=true};f.src&&p.getScript("//"+f.lang+".wikipedia.org/w/api.php?action=parse&props=text&redirects&page="+f.src.slice(f.src.lastIndexOf("/")+1)+"&format=json&callback=wikiCallback"+d);f.toString=function(){return f.src||f._natives.manifest.options.src["default"]}},start:function(f,j){var d=function(){if(j._fired){if(j._link&&
j._desc)if(document.getElementById(j.target)){document.getElementById(j.target).appendChild(j._link);document.getElementById(j.target).appendChild(j._desc);j._added=true}}else setTimeout(function(){d()},13)};d()},end:function(f,j){if(j._added){document.getElementById(j.target).removeChild(j._link);document.getElementById(j.target).removeChild(j._desc)}},_teardown:function(f){if(f._added){f._link.parentNode&&document.getElementById(f.target).removeChild(f._link);f._desc.parentNode&&document.getElementById(f.target).removeChild(f._desc);
delete f.target}}})})(Popcorn);(function(p){var f={},j=0,d=document.createElement("span"),c=["webkit","Moz","ms","O",""],g=["Transform","TransitionDuration","TransitionTimingFunction"],h={},i;document.getElementsByTagName("head")[0].appendChild(d);for(var k=0,q=g.length;k<q;k++)for(var l=0,t=c.length;l<t;l++){i=c[l]+g[k];if(i in d.style){h[g[k].toLowerCase()]=i;break}}document.getElementsByTagName("head")[0].appendChild(d);p.plugin("wordriver",{manifest:{about:{name:"Popcorn WordRiver Plugin"},options:{start:{elem:"input",type:"number",
label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"wordriver-container",text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},color:{elem:"input",type:"text",label:"Color","default":"Green",optional:true}}},_setup:function(n){n._duration=n.end-n.start;var s;if(!(s=f[n.target])){s=n.target;f[s]=document.createElement("div");var w=document.getElementById(s);w&&w.appendChild(f[s]);f[s].style.height="100%";f[s].style.position="relative";s=f[s]}n._container=s;n.word=document.createElement("span");
n.word.style.position="absolute";n.word.style.whiteSpace="nowrap";n.word.style.opacity=0;n.word.style.MozTransitionProperty="opacity, -moz-transform";n.word.style.webkitTransitionProperty="opacity, -webkit-transform";n.word.style.OTransitionProperty="opacity, -o-transform";n.word.style.transitionProperty="opacity, transform";n.word.style[h.transitionduration]="1s, "+n._duration+"s";n.word.style[h.transitiontimingfunction]="linear";n.word.innerHTML=n.text;n.word.style.color=n.color||"black"},start:function(n,
s){s._container.appendChild(s.word);s.word.style[h.transform]="";s.word.style.fontSize=~~(30+20*Math.random())+"px";j%=s._container.offsetWidth-s.word.offsetWidth;s.word.style.left=j+"px";j+=s.word.offsetWidth+10;s.word.style[h.transform]="translateY("+(s._container.offsetHeight-s.word.offsetHeight)+"px)";s.word.style.opacity=1;setTimeout(function(){s.word.style.opacity=0},(s.end-s.start-1||1)*1E3)},end:function(n,s){s.word.style.opacity=0},_teardown:function(n){var s=document.getElementById(n.target);
n.word.parentNode&&n._container.removeChild(n.word);f[n.target]&&!f[n.target].childElementCount&&s&&s.removeChild(f[n.target])&&delete f[n.target]}})})(Popcorn);(function(p){p.parser("parseJSON","JSON",function(f){var j={title:"",remote:"",data:[]};p.forEach(f.data,function(d){j.data.push(d)});return j})})(Popcorn);(function(p){p.parser("parseSBV",function(f){var j={title:"",remote:"",data:[]},d=[],c=0,g=0,h=function(n){n=n.split(":");var s=n.length-1,w;try{w=parseInt(n[s-1],10)*60+parseFloat(n[s],10);if(s===2)w+=parseInt(n[0],10)*3600}catch(F){throw"Bad cue";}return w},i=function(n,s){var w={};w[n]=s;return w};f=f.text.split(/(?:\r\n|\r|\n)/gm);for(g=f.length;c<g;){var k={},q=[],l=f[c++].split(",");try{k.start=h(l[0]);for(k.end=h(l[1]);c<g&&f[c];)q.push(f[c++]);k.text=q.join("<br />");d.push(i("subtitle",k))}catch(t){for(;c<
g&&f[c];)c++}for(;c<g&&!f[c];)c++}j.data=d;return j})})(Popcorn);(function(p){function f(d,c){var g={};g[d]=c;return g}function j(d){d=d.split(":");try{var c=d[2].split(",");if(c.length===1)c=d[2].split(".");return parseFloat(d[0],10)*3600+parseFloat(d[1],10)*60+parseFloat(c[0],10)+parseFloat(c[1],10)/1E3}catch(g){return 0}}p.parser("parseSRT",function(d){var c={title:"",remote:"",data:[]},g=[],h=0,i=0,k,q,l,t;d=d.text.split(/(?:\r\n|\r|\n)/gm);for(h=d.length-1;h>=0&&!d[h];)h--;l=h+1;for(h=0;h<l;h++){t={};q=[];t.id=parseInt(d[h++],10);k=d[h++].split(/[\t ]*--\>[\t ]*/);
t.start=j(k[0]);i=k[1].indexOf(" ");if(i!==-1)k[1]=k[1].substr(0,i);for(t.end=j(k[1]);h<l&&d[h];)q.push(d[h++]);t.text=q.join("\\N").replace(/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,"");t.text=t.text.replace(/</g,"&lt;").replace(/>/g,"&gt;");t.text=t.text.replace(/&lt;(\/?(font|b|u|i|s))((\s+(\w|\w[\w\-]*\w)(\s*=\s*(?:\".*?\"|'.*?'|[^'\">\s]+))?)+\s*|\s*)(\/?)&gt;/gi,"<$1$3$7>");t.text=t.text.replace(/\\N/gi,"<br />");g.push(f("subtitle",t))}c.data=g;return c})})(Popcorn);(function(p){function f(c,g){var h=c.substr(10).split(","),i;i={start:j(h[g.start]),end:j(h[g.end])};if(i.start===-1||i.end===-1)throw"Invalid time";var k=n.call(l,/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,""),q=k.replace,l;l=h.length;n=[];for(var t=g.text;t<l;t++)n.push(h[t]);l=n.join(",");var n=l.replace;i.text=q.call(k,/\\N/gi,"<br />");return i}function j(c){var g=c.split(":");if(c.length!==10||g.length<3)return-1;return parseInt(g[0],10)*3600+parseInt(g[1],10)*60+parseFloat(g[2],10)}function d(c,
g){var h={};h[c]=g;return h}p.parser("parseSSA",function(c){var g={title:"",remote:"",data:[]},h=[],i=0,k;c=c.text.split(/(?:\r\n|\r|\n)/gm);for(k=c.length;i<k&&c[i]!=="[Events]";)i++;var q=c[++i].substr(8).split(", "),l={},t,n;n=0;for(t=q.length;n<t;n++)if(q[n]==="Start")l.start=n;else if(q[n]==="End")l.end=n;else if(q[n]==="Text")l.text=n;for(;++i<k&&c[i]&&c[i][0]!=="[";)try{h.push(d("subtitle",f(c[i],l)))}catch(s){}g.data=h;return g})})(Popcorn);(function(p){function f(i,k,q){var l=i.firstChild;i=j(i,q);q=[];for(var t;l;){if(l.nodeType===1)if(l.nodeName==="p")q.push(d(l,k,i));else if(l.nodeName==="div"){t=c(l.getAttribute("begin"));if(t<0)t=k;q.push.apply(q,f(l,t,i))}l=l.nextSibling}return q}function j(i,k){var q=i.getAttribute("region");return q!==null?q:k||""}function d(i,k,q){var l={};l.text=(i.textContent||i.text).replace(g,"").replace(h,"<br />");l.id=i.getAttribute("xml:id")||i.getAttribute("id");l.start=c(i.getAttribute("begin"),k);
l.end=c(i.getAttribute("end"),k);l.target=j(i,q);if(l.end<0){l.end=c(i.getAttribute("duration"),0);if(l.end>=0)l.end+=l.start;else l.end=Number.MAX_VALUE}return{subtitle:l}}function c(i,k){var q;if(!i)return-1;try{return p.util.toSeconds(i)}catch(l){for(var t=i.length-1;t>=0&&i[t]<="9"&&i[t]>="0";)t--;q=t;t=parseFloat(i.substring(0,q));q=i.substring(q);return t*({h:3600,m:60,s:1,ms:0.001}[q]||-1)+(k||0)}}var g=/^[\s]+|[\s]+$/gm,h=/(?:\r\n|\r|\n)/gm;p.parser("parseTTML",function(i){var k={title:"",
remote:"",data:[]};if(!i.xml||!i.xml.documentElement)return k;i=i.xml.documentElement.firstChild;if(!i)return k;for(;i.nodeName!=="body";)i=i.nextSibling;if(i)k.data=f(i,0);return k})})(Popcorn);(function(p){p.parser("parseTTXT",function(f){var j={title:"",remote:"",data:[]},d=function(k){k=k.split(":");var q=0;try{return parseFloat(k[0],10)*60*60+parseFloat(k[1],10)*60+parseFloat(k[2],10)}catch(l){q=0}return q},c=function(k,q){var l={};l[k]=q;return l};f=f.xml.lastChild.lastChild;for(var g=Number.MAX_VALUE,h=[];f;){if(f.nodeType===1&&f.nodeName==="TextSample"){var i={};i.start=d(f.getAttribute("sampleTime"));i.text=f.getAttribute("text");if(i.text){i.end=g-0.001;h.push(c("subtitle",i))}g=
i.start}f=f.previousSibling}j.data=h.reverse();return j})})(Popcorn);(function(p){function f(d){var c=d.split(":");d=d.length;var g;if(d!==12&&d!==9)throw"Bad cue";d=c.length-1;try{g=parseInt(c[d-1],10)*60+parseFloat(c[d],10);if(d===2)g+=parseInt(c[0],10)*3600}catch(h){throw"Bad cue";}return g}function j(d,c){var g={};g[d]=c;return g}p.parser("parseVTT",function(d){var c={title:"",remote:"",data:[]},g=[],h=0,i=0,k,q;d=d.text.split(/(?:\r\n|\r|\n)/gm);i=d.length;if(i===0||d[0]!=="WEBVTT")return c;for(h++;h<i;){k=[];try{for(var l=h;l<i&&!d[l];)l++;h=l;var t=d[h++];l=
void 0;var n={};if(!t||t.indexOf("--\>")===-1)throw"Bad cue";l=t.replace(/--\>/," --\> ").split(/[\t ]+/);if(l.length<2)throw"Bad cue";n.id=t;n.start=f(l[0]);n.end=f(l[2]);for(q=n;h<i&&d[h];)k.push(d[h++]);q.text=k.join("<br />");g.push(j("subtitle",q))}catch(s){for(h=h;h<i&&d[h];)h++;h=h}}c.data=g;return c})})(Popcorn);(function(p){p.parser("parseXML","XML",function(f){var j={title:"",remote:"",data:[]},d={},c=function(l){l=l.split(":");if(l.length===1)return parseFloat(l[0],10);else if(l.length===2)return parseFloat(l[0],10)+parseFloat(l[1]/12,10);else if(l.length===3)return parseInt(l[0]*60,10)+parseFloat(l[1],10)+parseFloat(l[2]/12,10);else if(l.length===4)return parseInt(l[0]*3600,10)+parseInt(l[1]*60,10)+parseFloat(l[2],10)+parseFloat(l[3]/12,10)},g=function(l){for(var t={},n=0,s=l.length;n<s;n++){var w=l.item(n).nodeName,
F=l.item(n).nodeValue,A=d[F];if(w==="in")t.start=c(F);else if(w==="out")t.end=c(F);else if(w==="resourceid")for(var e in A){if(A.hasOwnProperty(e))if(!t[e]&&e!=="id")t[e]=A[e]}else t[w]=F}return t},h=function(l,t){var n={};n[l]=t;return n},i=function(l,t,n){var s={};p.extend(s,t,g(l.attributes),{text:l.textContent||l.text});t=l.childNodes;if(t.length<1||t.length===1&&t[0].nodeType===3)if(n)d[s.id]=s;else j.data.push(h(l.nodeName,s));else for(l=0;l<t.length;l++)t[l].nodeType===1&&i(t[l],s,n)};f=f.documentElement.childNodes;
for(var k=0,q=f.length;k<q;k++)if(f[k].nodeType===1)f[k].nodeName==="manifest"?i(f[k],{},true):i(f[k],{},false);return j})})(Popcorn);(function(p,f){f.player("soundcloud",{_canPlayType:function(j,d){return typeof d==="string"&&f.HTMLSoundCloudAudioElement._canPlaySrc(d)&&j.toLowerCase()!=="audio"}});f.soundcloud=function(j,d,c){typeof console!=="undefined"&&console.warn&&console.warn("Deprecated player 'soundcloud'. Please use Popcorn.HTMLSoundCloudAudioElement directly.");var g=f.HTMLSoundCloudAudioElement(j);j=f(g,c);setTimeout(function(){g.src=d},0);return j}})(window,Popcorn);(function(p,f){f.player("vimeo",{_canPlayType:function(j,d){return typeof d==="string"&&f.HTMLVimeoVideoElement._canPlaySrc(d)}});f.vimeo=function(j,d,c){typeof console!=="undefined"&&console.warn&&console.warn("Deprecated player 'vimeo'. Please use Popcorn.HTMLVimeoVideoElement directly.");var g=f.HTMLVimeoVideoElement(j);j=f(g,c);setTimeout(function(){g.src=d},0);return j}})(window,Popcorn);(function(p,f){var j=function(d,c){return typeof c==="string"&&f.HTMLYouTubeVideoElement._canPlaySrc(c)};f.player("youtube",{_canPlayType:j});f.youtube=function(d,c,g){typeof console!=="undefined"&&console.warn&&console.warn("Deprecated player 'youtube'. Please use Popcorn.HTMLYouTubeVideoElement directly.");var h=f.HTMLYouTubeVideoElement(d);d=f(h,g);setTimeout(function(){h.src=c},0);return d};f.youtube.canPlayType=j})(window,Popcorn);
